<!DOCTYPE html><html lang="en"><head>
<meta charset="utf-8">
<meta name="generator" content="ReSpec 26.8.12">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<style>
.issue-label{text-transform:initial}
.warning>p:first-child{margin-top:0}
.warning{padding:.5em;border-left-width:.5em;border-left-style:solid}
span.warning{padding:.1em .5em .15em}
.issue.closed span.issue-number{text-decoration:line-through}
.warning{border-color:#f11;border-width:.2em;border-style:solid;background:#fbe9e9}
.warning-title:before{content:"⚠";font-size:1.3em;float:left;padding-right:.3em;margin-top:-.3em}
li.task-list-item{list-style:none}
input.task-list-item-checkbox{margin:0 .35em .25em -1.6em;vertical-align:middle}
.issue a.respec-gh-label{padding:5px;margin:0 2px 0 2px;font-size:10px;text-transform:none;text-decoration:none;font-weight:700;border-radius:4px;position:relative;bottom:2px;border:none;display:inline-block}
</style>
<style>
pre.idl{padding:1em;position:relative}
pre.idl>code{color:#000}
@media print{
pre.idl{white-space:pre-wrap}
}
.idlHeader{display:block;width:150px;background:#8ccbf2;color:#fff;font-family:sans-serif;font-weight:700;margin:-1em 0 1em -1em;height:28px;line-height:28px}
.idlHeader a.self-link{margin-left:.3cm;text-decoration:none;border-bottom:none}
.idlID{font-weight:700;color:#005a9c}
.idlType{color:#005a9c}
.idlName{color:#ff4500}
.idlName a{color:#ff4500;border-bottom:1px dotted #ff4500;text-decoration:none}
a.idlEnumItem{color:#000;border-bottom:1px dotted #ccc;text-decoration:none}
.idlSuperclass{font-style:italic;color:#005a9c}
.idlDefaultValue,.idlParamName{font-style:italic}
.extAttr{color:#666}
.idlSectionComment{color:gray}
.idlIncludes a{font-weight:700}
.respec-button-copy-paste:focus{text-decoration:none;border-color:#51a7e8;outline:0;box-shadow:0 0 5px rgba(81,167,232,.5)}
.respec-button-copy-paste.selected:focus,.respec-button-copy-paste:focus:hover{border-color:#51a7e8}
.respec-button-copy-paste.zeroclipboard-is-active,.respec-button-copy-paste.zeroclipboard-is-hover,.respec-button-copy-paste:active,.respec-button-copy-paste:hover{text-decoration:none;background-color:#ddd;background-image:linear-gradient(#eee,#ddd);border-color:#ccc}
.respec-button-copy-paste.selected,.respec-button-copy-paste.zeroclipboard-is-active,.respec-button-copy-paste:active{background-color:#dcdcdc;background-image:none;border-color:#b5b5b5;box-shadow:inset 0 2px 4px rgba(0,0,0,.15)}
.respec-button-copy-paste.selected:hover{background-color:#cfcfcf}
.respec-button-copy-paste.disabled,.respec-button-copy-paste.disabled:hover,.respec-button-copy-paste:disabled,.respec-button-copy-paste:disabled:hover{color:rgba(102,102,102,.5);cursor:default;background-color:rgba(229,229,229,.5);background-image:none;border-color:rgba(197,197,197,.5);box-shadow:none}
@media print{
.respec-button-copy-paste{visibility:hidden}
}
</style>
<style>
dfn{cursor:pointer}
.dfn-panel{position:absolute;z-index:35;min-width:300px;max-width:500px;padding:.5em .75em;margin-top:.6em;font:small Helvetica Neue,sans-serif,Droid Sans Fallback;background:#fff;color:#000;box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);border-radius:2px}
.dfn-panel:not(.docked)>.caret{position:absolute;top:-9px}
.dfn-panel:not(.docked)>.caret::after,.dfn-panel:not(.docked)>.caret::before{content:"";position:absolute;border:10px solid transparent;border-top:0;border-bottom:10px solid #fff;top:0}
.dfn-panel:not(.docked)>.caret::before{border-bottom:9px solid #a2a9b1}
.dfn-panel *{margin:0}
.dfn-panel b{display:block;color:#000;margin-top:.25em}
.dfn-panel ul a[href]{color:#333}
.dfn-panel>div{display:flex}
.dfn-panel a.self-link{font-weight:700;margin-right:auto}
.dfn-panel .marker{padding:.1em;margin-left:.5em;border-radius:.2em;text-align:center;white-space:nowrap;font-size:90%;color:#040b1c}
.dfn-panel .marker.dfn-exported{background:#d1edfd;box-shadow:0 0 0 .125em #1ca5f940}
.dfn-panel .marker.idl-block{background:#8ccbf2;box-shadow:0 0 0 .125em #0670b161}
.dfn-panel a:not(:hover){text-decoration:none!important;border-bottom:none!important}
.dfn-panel a[href]:hover{border-bottom-width:1px}
.dfn-panel ul{padding:0}
.dfn-panel li{margin-left:1em}
.dfn-panel.docked{position:fixed;left:.5em;top:unset;bottom:2em;margin:0 auto;max-width:calc(100vw - .75em * 2 - .5em - .2em * 2);max-height:30vh;overflow:auto}
</style>
    
    
<title>MiniApp Lifecycle</title>

    
<link rel="stylesheet" href="./local.css">

    
<style>

    .two-cols {
      display: grid;
      grid-template-columns: 1fr 1fr;
    }

    table {
      border-collapse:collapse;
    }

    table,th, td {
      border: 1px solid #666;
    }

    td {
      padding:2px 15px;
    }
    
</style>



    

    

<style id="respec-mainstyle">
@keyframes pop{
0%{transform:scale(1,1)}
25%{transform:scale(1.25,1.25);opacity:.75}
100%{transform:scale(1,1)}
}
.hljs{background:0 0!important}
a abbr,h1 abbr,h2 abbr,h3 abbr,h4 abbr,h5 abbr,h6 abbr{border:none}
dfn{font-weight:700}
a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
a.bibref{text-decoration:none}
.respec-offending-element:target{animation:pop .25s ease-in-out 0s 1}
.respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
@supports not (text-decoration:red wavy underline){
.respec-offending-element:not(pre){display:inline-block}
.respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x}
}
#references :target{background:#eaf3ff;animation:pop .4s ease-in-out 0s 1}
cite .bibref{font-style:normal}
code{color:#c63501}
th code{color:inherit}
a[href].orcid{padding-left:4px;padding-right:4px}
a[href].orcid>svg{margin-bottom:-2px}
.toc a,.tof a{text-decoration:none}
a .figno,a .secno{color:#000}
ol.tof,ul.tof{list-style:none outside none}
.caption{margin-top:.5em;font-style:italic}
table.simple{border-spacing:0;border-collapse:collapse;border-bottom:3px solid #005a9c}
.simple th{background:#005a9c;color:#fff;padding:3px 5px;text-align:left}
.simple th a{color:#fff;padding:3px 5px;text-align:left}
.simple th[scope=row]{background:inherit;color:inherit;border-top:1px solid #ddd}
.simple td{padding:3px 10px;border-top:1px solid #ddd}
.simple tr:nth-child(even){background:#f0f6ff}
.section dd>p:first-child{margin-top:0}
.section dd>p:last-child{margin-bottom:0}
.section dd{margin-bottom:1em}
.section dl.attrs dd,.section dl.eldef dd{margin-bottom:0}
#issue-summary>ul{column-count:2}
#issue-summary li{list-style:none;display:inline-block}
details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
details.respec-tests-details>*{padding-right:2em}
details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:.3em;background-color:#fff;padding-bottom:.5em}
details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
details.respec-tests-details>ul{width:100%;margin-top:-.3em}
details.respec-tests-details>li{padding-left:1em}
a[href].self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
h2,h3,h4,h5,h6{position:relative}
aside.example .marker>a.self-link{color:inherit}
h2>a.self-link,h3>a.self-link,h4>a.self-link,h5>a.self-link,h6>a.self-link{border:none;color:inherit;font-size:83%;height:2em;left:-1.6em;opacity:.5;position:absolute;text-align:center;text-decoration:none;top:0;transition:opacity .2s;width:2em}
h2>a.self-link::before,h3>a.self-link::before,h4>a.self-link::before,h5>a.self-link::before,h6>a.self-link::before{content:"§";display:block}
@media (max-width:767px){
dd{margin-left:0}
h2>a.self-link,h3>a.self-link,h4>a.self-link,h5>a.self-link,h6>a.self-link{left:auto;top:auto}
}
@media print{
.removeOnSave{display:none}
}
</style>
<meta name="description" content="This specification defines the MiniApp lifecycle events and the process to manage MiniApp and each page's lifecycle. Implementing this specification enables the user agent to manage the lifecycle events of both global application lifecycle and page lifecycle.">
<link rel="canonical" href="https://www.w3.org/TR/miniapp-lifecycle/">
<style>
var{position:relative;cursor:pointer}
var[data-type]::after,var[data-type]::before{position:absolute;left:50%;top:-6px;opacity:0;transition:opacity .4s;pointer-events:none}
var[data-type]::before{content:"";transform:translateX(-50%);border-width:4px 6px 0 6px;border-style:solid;border-color:transparent;border-top-color:#000}
var[data-type]::after{content:attr(data-type);transform:translateX(-50%) translateY(-100%);background:#000;text-align:center;font-family:"Dank Mono","Fira Code",monospace;font-style:normal;padding:6px;border-radius:3px;color:#daca88;text-indent:0;font-weight:400}
var[data-type]:hover::after,var[data-type]:hover::before{opacity:1}
</style>
<script id="initialUserConfig" type="application/json">{
  "specStatus": "FPWD",
  "copyrightStart": "2021",
  "edDraftURI": "https://w3c.github.io/miniapp-lifecycle/",
  "shortName": "miniapp-lifecycle",
  "publishDate": "2021-06-15",
  "editors": [
    {
      "name": "Qing An",
      "companyURL": "https://www.alibabagroup.com/en/global/home",
      "company": "Alibaba",
      "w3cid": 76701
    },
    {
      "name": "Haoyang Xu",
      "companyURL": "https://www.alibabagroup.com/en/global/home",
      "company": "Alibaba",
      "w3cid": 131750
    }
  ],
  "formerEditors": [
    {
      "name": "Xia Xu",
      "companyURL": "https://www.alibabagroup.com/en/global/home",
      "company": "Alibaba"
    }
  ],
  "group": "wg/miniapps",
  "github": {
    "repoURL": "https://github.com/w3c/miniapp-lifecycle",
    "branch": "main"
  },
  "localBiblio": {
    "MINIAPP-PACKAGING": {
      "title": "MiniApp Packaging",
      "href": "https://w3c.github.io/miniapp-packaging/"
    }
  },
  "publishISODate": "2021-06-15T00:00:00.000Z",
  "generatedSubtitle": "First Public Working Draft 15 June 2021"
}</script>
<link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/W3C-WD"></head>

<body data-cite="HTML webidl" data-new-gr-c-s-check-loaded="14.1014.0" data-gr-ext-installed="" class="h-entry informative"><div class="head">
    <a class="logo" href="https://www.w3.org/"><img alt="W3C" width="72" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C"></a> <h1 id="title" class="title">MiniApp Lifecycle</h1>
    
    <h2>
      W3C First Public Working Draft
      <time class="dt-published" datetime="2021-06-15">15 June 2021</time>
    </h2>
    <dl>
      <dt>This version:</dt><dd>
              <a class="u-url" href="https://www.w3.org/TR/2021/WD-miniapp-lifecycle-20210615/">https://www.w3.org/TR/2021/WD-miniapp-lifecycle-20210615/</a>
            </dd><dt>Latest published version:</dt><dd>
              <a href="https://www.w3.org/TR/miniapp-lifecycle/">https://www.w3.org/TR/miniapp-lifecycle/</a>
            </dd>
      <dt>Latest editor's draft:</dt><dd><a href="https://w3c.github.io/miniapp-lifecycle/">https://w3c.github.io/miniapp-lifecycle/</a></dd>
      
      
      
      
      
      <dt>Editors:</dt>
      <dd class="editor p-author h-card vcard" data-editor-id="76701">
    <span class="p-name fn">Qing An</span> (<a class="p-org org h-org" href="https://www.alibabagroup.com/en/global/home">Alibaba</a>)
  </dd><dd class="editor p-author h-card vcard" data-editor-id="131750">
    <span class="p-name fn">Haoyang Xu</span> (<a class="p-org org h-org" href="https://www.alibabagroup.com/en/global/home">Alibaba</a>)
  </dd>
      <dt>
              Former editor:
            </dt><dd class="editor p-author h-card vcard">
    <span class="p-name fn">Xia Xu</span> (<a class="p-org org h-org" href="https://www.alibabagroup.com/en/global/home">Alibaba</a>)
  </dd>
      
      <dt>Participate:</dt><dd>
    <a href="https://github.com/w3c/miniapp-lifecycle/">GitHub w3c/miniapp-lifecycle</a>
  </dd><dd>
    <a href="https://github.com/w3c/miniapp-lifecycle/issues/">File an issue</a>
  </dd><dd>
    <a href="https://github.com/w3c/miniapp-lifecycle/commits/main">Commit history</a>
  </dd><dd>
    <a href="https://github.com/w3c/miniapp-lifecycle/pulls/">Pull requests</a>
  </dd>
    </dl>
    
    
    
    <p class="copyright">
    <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>
    ©
    2021
    
    <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>,
    <a href="https://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="https://www.keio.ac.jp/">Keio</a>,
    <a href="https://ev.buaa.edu.cn/">Beihang</a>). 
    W3C <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a rel="license" href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document">permissive document license</a> rules
    apply.
  </p>
    <hr title="Separator for header">
  </div>
    <section id="abstract" class="introductory"><h2>Abstract</h2>
        <p>
          This specification defines the MiniApp lifecycle events and the process to manage MiniApp and each page's lifecycle. Implementing this specification enables the user agent to manage the lifecycle events of both global application lifecycle and page lifecycle.
        </p>
    </section>
    <section id="sotd" class="introductory"><h2>Status of This Document</h2><p><em>This section describes the status of this
      document at the time of its publication. Other documents may supersede
      this document. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications and the latest revision
      of this technical report can be found in the
      <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at
      https://www.w3.org/TR/.</em></p>
        
      
    <p>
    This document was published by the <a href="https://www.w3.org/2021/miniapps/">MiniApps Working Group</a> as a
    First Public Working Draft. 
    This document is intended to become a <abbr title="World Wide Web Consortium">W3C</abbr> Recommendation.
  </p><p>
    <a href="https://github.com/w3c/miniapp-lifecycle/issues/">GitHub Issues</a> are preferred for
          discussion of this specification.
        
    
  </p><p>
      Publication as a First Public Working Draft does not imply endorsement
      by the <abbr title="World Wide Web Consortium">W3C</abbr> Membership. 
    </p><p>This is a draft document and may be updated, replaced
  or obsoleted by other documents at any time. It is inappropriate to cite this
  document as other than work in progress.
  </p><p></p><p>
    
        This document was produced by a group
        operating under the
        <a href="https://www.w3.org/Consortium/Patent-Policy/"><abbr title="World Wide Web Consortium">W3C</abbr> Patent
          Policy</a>.
       
    
                <abbr title="World Wide Web Consortium">W3C</abbr> maintains a
                <a rel="disclosure" href="https://www.w3.org/groups/wg/miniapps/ipr">public list of any patent disclosures</a>
          made in connection with the deliverables of
          the group; that page also includes
          instructions for disclosing a patent. An individual who has actual
          knowledge of a patent which the individual believes contains
          <a href="https://www.w3.org/Consortium/Patent-Policy/#def-essential">Essential Claim(s)</a>
          must disclose the information in accordance with
          <a href="https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">section 6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.
        
    
  </p><p>
                  This document is governed by the
                  <a id="w3c_process_revision" href="https://www.w3.org/2020/Process-20200915/">15 September 2020 <abbr title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
                </p></section><nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#background"><bdi class="secno">1. </bdi>Background</a></li><li class="tocline"><a class="tocxref" href="#miniapp-global-application-lifecycle"><bdi class="secno">2. </bdi>MiniApp Global Application Lifecycle</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#miniapp-global-application-lifecycle-events"><bdi class="secno">2.1 </bdi>MiniApp Global Application Lifecycle Events</a></li><li class="tocline"><a class="tocxref" href="#miniapp-global-application-lifecycle-states"><bdi class="secno">2.2 </bdi>MiniApp Global Application Lifecycle States</a></li><li class="tocline"><a class="tocxref" href="#globalstate-enum"><bdi class="secno">2.3 </bdi>
            <code>GlobalState</code> enum
          </a></li><li class="tocline"><a class="tocxref" href="#miniapp-global-application-lifecycle-interface-and-callbacks"><bdi class="secno">2.4 </bdi>MiniApp Global Application Lifecycle interface and callbacks</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#getglobalstate-method"><bdi class="secno">2.4.1 </bdi>
                <code>getGlobalState()</code> method
            </a></li><li class="tocline"><a class="tocxref" href="#globallaunchedcallback"><bdi class="secno">2.4.2 </bdi>
                <code>globalLaunchedCallback</code>
            </a></li><li class="tocline"><a class="tocxref" href="#globalshowncallback"><bdi class="secno">2.4.3 </bdi>
                <code>globalShownCallback</code>
            </a></li><li class="tocline"><a class="tocxref" href="#globalhiddencallback"><bdi class="secno">2.4.4 </bdi>
                <code>globalHiddenCallback</code>
            </a></li><li class="tocline"><a class="tocxref" href="#globalerrorcallback"><bdi class="secno">2.4.5 </bdi>
                <code>globalErrorCallback</code>
            </a></li></ol></li><li class="tocline"><a class="tocxref" href="#inputobject-interface"><bdi class="secno">2.5 </bdi>
                <code>InputObject</code> interface
            </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#inputquery-attribute"><bdi class="secno">2.5.1 </bdi>
                    <code>inputQuery</code> attribute
                </a></li><li class="tocline"><a class="tocxref" href="#pagepath-attribute"><bdi class="secno">2.5.2 </bdi>
                    <code>pagePath</code> attribute
                </a></li><li class="tocline"><a class="tocxref" href="#referrerinfo-attribute"><bdi class="secno">2.5.3 </bdi>
                    <code>referrerInfo</code> attribute
                </a></li></ol></li><li class="tocline"><a class="tocxref" href="#lifecycleerror-interface"><bdi class="secno">2.6 </bdi>
                <code>LifecycleError</code> interface
            </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#errordescription-attribute"><bdi class="secno">2.6.1 </bdi>
                    <code>errorDescription</code> attribute
                </a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#miniapp-page-lifecycle"><bdi class="secno">3. </bdi>MiniApp Page Lifecycle</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#miniapp-page-lifecycle-events"><bdi class="secno">3.1 </bdi>MiniApp Page Lifecycle Events</a></li><li class="tocline"><a class="tocxref" href="#miniapp-page-lifecycle-states"><bdi class="secno">3.2 </bdi>MiniApp Page Lifecycle States</a></li><li class="tocline"><a class="tocxref" href="#pagestate-enum"><bdi class="secno">3.3 </bdi>
            <code>PageState</code> enum
          </a></li><li class="tocline"><a class="tocxref" href="#miniapp-page-lifecycle-interface-and-callbacks"><bdi class="secno">3.4 </bdi>MiniApp Page Lifecycle interface and callbacks</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#getpagestate-method"><bdi class="secno">3.4.1 </bdi>
                <code>getPageState()</code> method
            </a></li><li class="tocline"><a class="tocxref" href="#pageloadedcallback"><bdi class="secno">3.4.2 </bdi>
                <code>pageLoadedCallback</code>
            </a></li><li class="tocline"><a class="tocxref" href="#pagereadycallback"><bdi class="secno">3.4.3 </bdi>
                <code>pageReadyCallback</code>
            </a></li><li class="tocline"><a class="tocxref" href="#pageshowncallback"><bdi class="secno">3.4.4 </bdi>
                <code>pageShownCallback</code>
            </a></li><li class="tocline"><a class="tocxref" href="#pagehiddencallback"><bdi class="secno">3.4.5 </bdi>
                <code>pageHiddenCallback</code>
            </a></li><li class="tocline"><a class="tocxref" href="#pageunloadedcallback"><bdi class="secno">3.4.6 </bdi>
                <code>pageUnloadedCallback</code>
            </a></li></ol></li><li class="tocline"><a class="tocxref" href="#pageinputobject-interface"><bdi class="secno">3.5 </bdi>
                <code>PageInputObject</code> interface
            </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#pageinputquery-attribute"><bdi class="secno">3.5.1 </bdi>
                    <code>pageInputQuery</code> attribute
                </a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#privacy-and-security"><bdi class="secno">4. </bdi>Privacy and Security</a></li><li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">A. </bdi>References</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">A.1 </bdi>Informative references</a></li></ol></li></ol></nav>

    <section id="background">
      <h2 id="x1-background"><bdi class="secno">1. </bdi>Background<a class="self-link" aria-label="§" href="#background"></a></h2>
      <p>
        As described in <a href="https://www.w3.org/TR/mini-app-white-paper/#separate-the-view-layer-from-the-logic-layer">MiniApp Standardization White Paper</a>, in a miniapp, the View layer is separated from the Logic layer. The <dfn data-dfn-for="Document" data-export="" id="dfn-view-layer" tabindex="0" aria-haspopup="dialog">View layer</dfn> is responsible for rendering MiniApp pages, including Web rendering and native rendering, which can be considered as hybrid rendering. The <dfn data-dfn-for="Document" data-export="" id="dfn-logic-layer" tabindex="0" aria-haspopup="dialog">Logic layer</dfn> is implemented with JavaScript Worker. The Logic layer is responsible for MiniApp’s event processing, API calling and lifecycle management.
      </p>
      <p>
        MiniApp lifecycle mechanism provides a means to manage MiniApp's View layer and Logic layer through the MiniApp <a data-link-type="dfn" href="#dfn-global-application-lifecycle-events" class="internalDFN" id="ref-for-dfn-global-application-lifecycle-events-1">global application lifecycle events</a> and MiniApp <a data-link-type="dfn" href="#dfn-page-lifecycle-events" class="internalDFN" id="ref-for-dfn-page-lifecycle-events-1">page lifecycle events</a>. Developing MiniApp with knowledge of the MiniApp <a data-link-type="dfn" href="#dfn-global-application-lifecycle-states" class="internalDFN" id="ref-for-dfn-global-application-lifecycle-states-1">global application lifecycle states</a> and MiniApp <a data-link-type="dfn" href="#dfn-page-lifecycle-states" class="internalDFN" id="ref-for-dfn-page-lifecycle-states-1">page lifecycle states</a> can lead to improved user experiences. MiniApp lifecycle includes a set of events, with which MiniApp can choose to alter its behavior based on its state.
      </p>
    </section>

    <section id="miniapp-global-application-lifecycle">
        <h2 id="x2-miniapp-global-application-lifecycle"><bdi class="secno">2. </bdi>MiniApp Global Application Lifecycle<a class="self-link" aria-label="§" href="#miniapp-global-application-lifecycle"></a></h2>
        <section id="miniapp-global-application-lifecycle-events">
          <h3 id="x2-1-miniapp-global-application-lifecycle-events"><bdi class="secno">2.1 </bdi>MiniApp Global Application Lifecycle Events<a class="self-link" aria-label="§" href="#miniapp-global-application-lifecycle-events"></a></h3>
          <p>This spec defines what the lifecycle of a MiniApp global application is and adds definition to enable MiniApp to respond to four important <dfn data-dfn-for="Document" data-export="" id="dfn-global-application-lifecycle-events" tabindex="0" aria-haspopup="dialog">global application lifecycle events</dfn> commonly performed by MiniApp:</p>
          <ul>
          <li>
            <p>MiniApp <dfn data-dfn-for="Document" data-export="" data-dfn-type="dfn" id="dfn-initialization" tabindex="0" aria-haspopup="dialog">initialization</dfn></p>
          </li>
          <li>
            <p>MiniApp <dfn data-dfn-for="Document" data-export="" data-dfn-type="dfn" id="dfn-running-in-foreground" tabindex="0" aria-haspopup="dialog">running in foreground</dfn></p>
          </li>
          <li>
            <p>MiniApp <dfn data-dfn-for="Document" data-export="" data-dfn-type="dfn" id="dfn-running-in-background" tabindex="0" aria-haspopup="dialog">running in background</dfn></p>
          </li> 
          <li>
            <p>MiniApp <dfn data-dfn-for="Document" data-export="" data-dfn-type="dfn" id="dfn-in-error" tabindex="0" aria-haspopup="dialog">in error</dfn></p>
          </li>
          </ul>
          
          <p>For each MiniApp, after <a data-link-type="dfn" href="#dfn-initialization" class="internalDFN" id="ref-for-dfn-initialization-1">initialization</a>, it will be either <a data-link-type="dfn" href="#dfn-running-in-foreground" class="internalDFN" id="ref-for-dfn-running-in-foreground-1">running in foreground</a> or <a data-link-type="dfn" href="#dfn-running-in-background" class="internalDFN" id="ref-for-dfn-running-in-background-1">running in background</a>.</p>
          <p>When user chooses to close the MiniApp by clicking the close button on MiniApp, or go to the mobile phone’s home screen, the MiniApp will not be destroyed immediately, but switch to be <a data-link-type="dfn" href="#dfn-running-in-background" class="internalDFN" id="ref-for-dfn-running-in-background-2">running in background</a>.</p>
          <p>When user reopens the same MiniApp, MiniApp will switch from <a data-link-type="dfn" href="#dfn-running-in-background" class="internalDFN" id="ref-for-dfn-running-in-background-3">running in background</a> to <a data-link-type="dfn" href="#dfn-running-in-foreground" class="internalDFN" id="ref-for-dfn-running-in-foreground-2">running in foreground</a>.</p>
          <p>Only when MiniApp runs in the background for more than a specific time duration (e.g., 5 minutes), or occupies too much system resources in the background, the MiniApp will be destroyed.</p>
            
        </section>
        
        <section id="miniapp-global-application-lifecycle-states">
          <h3 id="x2-2-miniapp-global-application-lifecycle-states"><bdi class="secno">2.2 </bdi>MiniApp Global Application Lifecycle States<a class="self-link" aria-label="§" href="#miniapp-global-application-lifecycle-states"></a></h3>
          <p>This spec formalizes four <dfn data-dfn-for="Document" data-export="" id="dfn-global-application-lifecycle-states" tabindex="0" aria-haspopup="dialog">global application lifecycle states</dfn> to support the above <a data-link-type="dfn" href="#dfn-global-application-lifecycle-events" class="internalDFN" id="ref-for-dfn-global-application-lifecycle-events-2">global application lifecycle events</a>:</p>

      <dl>
        <dt>
          <dfn data-dfn-for="Document" data-export="" data-dfn-type="dfn" id="dfn-launched" tabindex="0" aria-haspopup="dialog">launched</dfn>
        </dt>
        <dd>
          Lifecycle state for MiniApp <a data-link-type="dfn" href="#dfn-initialization" class="internalDFN" id="ref-for-dfn-initialization-2">initialization</a>. This means that the MiniApp <a data-link-type="dfn" href="#dfn-initialization" class="internalDFN" id="ref-for-dfn-initialization-3">initialization</a> is completed, and it is triggered only once. Through this event, developer can obtain the information of the MiniApp, such as URI, source info, etc.
        </dd>
        <dt>
          <dfn data-dfn-for="Document" data-export="" data-dfn-type="dfn" id="dfn-shown" tabindex="0" aria-haspopup="dialog">shown</dfn>
        </dt>
        <dd>
          Lifecycle state for MiniApp <a data-link-type="dfn" href="#dfn-running-in-foreground" class="internalDFN" id="ref-for-dfn-running-in-foreground-3">running in foreground</a>. It is triggered once the MiniApp enters the <a data-link-type="dfn" href="#dfn-launched" class="internalDFN" id="ref-for-dfn-launched-1">launched</a> state, or once the MiniApp switches to be <a data-link-type="dfn" href="#dfn-running-in-foreground" class="internalDFN" id="ref-for-dfn-running-in-foreground-4">running in foreground</a> from <a data-link-type="dfn" href="#dfn-running-in-background" class="internalDFN" id="ref-for-dfn-running-in-background-4">running in background</a>.
        </dd>
        <dt>
          <dfn data-dfn-for="Document" data-export="" data-dfn-type="dfn" id="dfn-hidden" tabindex="0" aria-haspopup="dialog">hidden</dfn>
        </dt>
        <dd>
          Lifecycle state for MiniApp <a data-link-type="dfn" href="#dfn-running-in-background" class="internalDFN" id="ref-for-dfn-running-in-background-5">running in background</a>. It is triggered once the MiniApp switches to be <a data-link-type="dfn" href="#dfn-running-in-background" class="internalDFN" id="ref-for-dfn-running-in-background-6">running in background</a> from <a data-link-type="dfn" href="#dfn-running-in-foreground" class="internalDFN" id="ref-for-dfn-running-in-foreground-5">running in foreground</a>.
        </dd>
        <dt>
          <dfn data-dfn-for="Document" data-export="" data-dfn-type="dfn" id="dfn-error" tabindex="0" aria-haspopup="dialog">error</dfn>
        </dt>
        <dd>
          Lifecycle state for MiniApp <a data-link-type="dfn" href="#dfn-in-error" class="internalDFN" id="ref-for-dfn-in-error-1">in error</a>. It is triggered once the MiniApp is confronted with script error.
        </dd>
      </dl>
        </section>
                
        <section data-dfn-for="GlobalState" id="globalstate-enum">
          <h3 id="x2-3-globalstate-enum"><bdi class="secno">2.3 </bdi>
            <code>GlobalState</code> enum
          <a class="self-link" aria-label="§" href="#globalstate-enum"></a></h3>
          <p>The MiniApp <a data-link-type="dfn" href="#dfn-global-application-lifecycle-states" class="internalDFN" id="ref-for-dfn-global-application-lifecycle-states-2">global application lifecycle states</a> are reflected in the API via the <a data-link-type="idl" href="#dom-globalstate" class="internalDFN" id="ref-for-dom-globalstate-1"><code>GlobalState</code></a> enum.</p>
            
          <pre class="idl def" id="webidl-2044944987"><span class="idlHeader"><a class="self-link" href="#webidl-2044944987">WebIDL</a></span><code><span data-idl="" class="idlEnum" id="idl-def-globalstate" data-title="GlobalState">enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-globalstate" id="ref-for-dom-globalstate-2"><code>GlobalState</code></a> {
    <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-globalstate-launched" id="ref-for-dom-globalstate-launched-1"><code>launched</code></a>"</span>, <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-globalstate-shown" id="ref-for-dom-globalstate-shown-1"><code>shown</code></a>"</span>, <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-globalstate-hidden" id="ref-for-dom-globalstate-hidden-1"><code>hidden</code></a>"</span>, <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-globalstate-error" id="ref-for-dom-globalstate-error-1"><code>error</code></a>"</span>
};</span></code></pre> 
          
          <p>
            The <dfn data-export="" data-dfn-type="enum" id="dom-globalstate" data-idl="enum" data-title="GlobalState" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>GlobalState</code></dfn> enum is used to represent the
            <a data-link-type="dfn" href="#dfn-global-application-lifecycle-states" class="internalDFN" id="ref-for-dfn-global-application-lifecycle-states-3">global application lifecycle states</a>.
          </p>
          <p>
            The "<dfn data-export="" data-dfn-type="enum-value" id="dom-globalstate-launched" data-idl="enum-value" data-title="launched" data-dfn-for="GlobalState" tabindex="0" aria-haspopup="dialog"><code>launched</code></dfn>" enum value represents the <a data-link-type="dfn" href="#dfn-launched" class="internalDFN" id="ref-for-dfn-launched-2">launched</a>
            <a data-link-type="dfn" href="#dfn-global-application-lifecycle-states" class="internalDFN" id="ref-for-dfn-global-application-lifecycle-states-4">global application lifecycle states</a>.
         </p>
          <p>
            The "<dfn data-export="" data-dfn-type="enum-value" id="dom-globalstate-shown" data-idl="enum-value" data-title="shown" data-dfn-for="GlobalState" tabindex="0" aria-haspopup="dialog"><code>shown</code></dfn>" enum value represents the <a data-link-type="dfn" href="#dfn-shown" class="internalDFN" id="ref-for-dfn-shown-1">shown</a>
            <a data-link-type="dfn" href="#dfn-global-application-lifecycle-states" class="internalDFN" id="ref-for-dfn-global-application-lifecycle-states-5">global application lifecycle states</a>.
         </p>
         <p>
            The "<dfn data-export="" data-dfn-type="enum-value" id="dom-globalstate-hidden" data-idl="enum-value" data-title="hidden" data-dfn-for="GlobalState" tabindex="0" aria-haspopup="dialog"><code>hidden</code></dfn>" enum value represents the <a data-link-type="dfn" href="#dfn-hidden" class="internalDFN" id="ref-for-dfn-hidden-1">hidden</a>
            <a data-link-type="dfn" href="#dfn-global-application-lifecycle-states" class="internalDFN" id="ref-for-dfn-global-application-lifecycle-states-6">global application lifecycle states</a>.
         </p>
         <p>
            The "<dfn data-export="" data-dfn-type="enum-value" id="dom-globalstate-error" data-idl="enum-value" data-title="error" data-dfn-for="GlobalState" tabindex="0" aria-haspopup="dialog"><code>error</code></dfn>" enum value represents the <a data-link-type="dfn" href="#dfn-error" class="internalDFN" id="ref-for-dfn-error-1">error</a>
            <a data-link-type="dfn" href="#dfn-global-application-lifecycle-states" class="internalDFN" id="ref-for-dfn-global-application-lifecycle-states-7">global application lifecycle states</a>.
         </p>
        </section>
        
                  
        <section data-dfn-for="Global" id="miniapp-global-application-lifecycle-interface-and-callbacks">
          <h3 id="x2-4-miniapp-global-application-lifecycle-interface-and-callbacks"><bdi class="secno">2.4 </bdi>MiniApp Global Application Lifecycle interface and callbacks<a class="self-link" aria-label="§" href="#miniapp-global-application-lifecycle-interface-and-callbacks"></a></h3>
          
          <pre class="idl def" id="webidl-1241168519"><span class="idlHeader"><a class="self-link" href="#webidl-1241168519">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-global" data-title="Global"> [<span class="extAttr"><a data-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=<a data-type="interface" href="https://html.spec.whatwg.org/multipage/window-object.html#window">Window</a></span>]
 interface <dfn data-export="" data-dfn-type="interface" id="dom-global" data-idl="interface" data-title="Global" data-dfn-for="Global" class="idlID" tabindex="0" aria-haspopup="dialog"><code>Global</code></dfn> {<span data-idl="" class="idlMethod" id="idl-def-global-getglobalstate-globallaunchedcallback-globalshowncallback-globalhiddencallback-globalerrorcallback" data-title="getGlobalState" data-dfn-for="Global"><span class="idlType">
  <a data-type="interface" href="https://heycam.github.io/webidl/#idl-undefined">undefined</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-global-getglobalstate" id="ref-for-dom-global-getglobalstate-1"><code>getGlobalState</code></a> (<span class="idlType">
      <a href="#dom-globallaunchedcallback" class="internalDFN" data-link-type="idl" id="ref-for-dom-globallaunchedcallback-1"><code>GlobalLaunchedCallback</code></a></span> <span class="idlParamName">globalLaunchedCallback</span>,<span class="idlType">
      <a href="#dom-globalshowncallback" class="internalDFN" data-link-type="idl" id="ref-for-dom-globalshowncallback-1"><code>GlobalShownCallback</code></a></span> <span class="idlParamName">globalShownCallback</span>,<span class="idlType">
      <a href="#dom-globalhiddencallback" class="internalDFN" data-link-type="idl" id="ref-for-dom-globalhiddencallback-1"><code>GlobalHiddenCallback</code></a></span> <span class="idlParamName">globalHiddenCallback</span>,<span class="idlType">
      <a href="#dom-globalerrorcallback" class="internalDFN" data-link-type="idl" id="ref-for-dom-globalerrorcallback-1"><code>GlobalErrorCallback</code></a></span> <span class="idlParamName">globalErrorCallback</span>
  );</span>
 };</span><span data-idl="" class="idlCallback" id="idl-def-globallaunchedcallback" data-title="GlobalLaunchedCallback">

callback <dfn data-export="" data-dfn-type="callback" id="dom-globallaunchedcallback" data-idl="callback" data-title="GlobalLaunchedCallback" data-dfn-for="GlobalLaunchedCallback" class="idlID" tabindex="0" aria-haspopup="dialog"><code>GlobalLaunchedCallback</code></dfn> =<span class="idlType"> <a data-type="interface" href="https://heycam.github.io/webidl/#idl-undefined">undefined</a></span> (<span class="idlType">
  <a href="#dom-inputobject" class="internalDFN" data-link-type="idl" id="ref-for-dom-inputobject-1"><code>InputObject</code></a></span> <span class="idlParamName">inputObject</span>
);</span><span data-idl="" class="idlCallback" id="idl-def-globalshowncallback" data-title="GlobalShownCallback">

callback <dfn data-export="" data-dfn-type="callback" id="dom-globalshowncallback" data-idl="callback" data-title="GlobalShownCallback" data-dfn-for="GlobalShownCallback" class="idlID" tabindex="0" aria-haspopup="dialog"><code>GlobalShownCallback</code></dfn> =<span class="idlType"> <a data-type="interface" href="https://heycam.github.io/webidl/#idl-undefined">undefined</a></span> (<span class="idlType">
  <a href="#dom-inputobject" class="internalDFN" data-link-type="idl" id="ref-for-dom-inputobject-2"><code>InputObject</code></a></span> <span class="idlParamName">inputObject</span>
);</span><span data-idl="" class="idlCallback" id="idl-def-globalhiddencallback" data-title="GlobalHiddenCallback">

callback <dfn data-export="" data-dfn-type="callback" id="dom-globalhiddencallback" data-idl="callback" data-title="GlobalHiddenCallback" data-dfn-for="GlobalHiddenCallback" class="idlID" tabindex="0" aria-haspopup="dialog"><code>GlobalHiddenCallback</code></dfn> =<span class="idlType"> <a data-type="interface" href="https://heycam.github.io/webidl/#idl-undefined">undefined</a></span> (
);</span><span data-idl="" class="idlCallback" id="idl-def-globalerrorcallback" data-title="GlobalErrorCallback">

callback <dfn data-export="" data-dfn-type="callback" id="dom-globalerrorcallback" data-idl="callback" data-title="GlobalErrorCallback" data-dfn-for="GlobalErrorCallback" class="idlID" tabindex="0" aria-haspopup="dialog"><code>GlobalErrorCallback</code></dfn> =<span class="idlType"> <a data-type="interface" href="https://heycam.github.io/webidl/#idl-undefined">undefined</a></span> (<span class="idlType">
  <a href="#dom-lifecycleerror" class="internalDFN" data-link-type="idl" id="ref-for-dom-lifecycleerror-1"><code>LifecycleError</code></a></span> <span class="idlParamName">lifecycleError</span>
);</span></code></pre>
         
         <section id="getglobalstate-method">
            <h4 id="x2-4-1-getglobalstate-method"><bdi class="secno">2.4.1 </bdi>
                <code>getGlobalState()</code> method
            <a class="self-link" aria-label="§" href="#getglobalstate-method"></a></h4>
            <p>
                When <dfn data-export="" data-dfn-type="method" id="dom-global-getglobalstate" data-idl="operation" data-title="getGlobalState()" data-dfn-for="Global" data-type="undefined" data-lt="getGlobalState()|getGlobalState(globalLaunchedCallback, globalShownCallback, globalHiddenCallback, globalErrorCallback)" data-local-lt="Global.getGlobalState|Global.getGlobalState()|getGlobalState" tabindex="0" aria-haspopup="dialog"><code>getGlobalState()</code></dfn> is invoked, the user agent <em class="rfc2119">MUST</em>:
            </p>
            <ol class="algorithm">
                <li>Request global application lifecycle state, passing globalLaunchedCallback, globalShownCallback, globalHiddenCallback, and globalErrorCallback.
                </li>
                <li>Return <code>undefined</code>.
                </li>
            </ol>
        </section>
        
        <section id="globallaunchedcallback">
            <h4 id="x2-4-2-globallaunchedcallback"><bdi class="secno">2.4.2 </bdi>
                <code>globalLaunchedCallback</code>
            <a class="self-link" aria-label="§" href="#globallaunchedcallback"></a></h4>
            <p>
                If MiniApp's first page is ready to load, invoke <a data-link-type="idl" href="#dom-globallaunchedcallback" class="internalDFN" id="ref-for-dom-globallaunchedcallback-2"><code>GlobalLaunchedCallback</code></a>.
            </p>
        </section>
        
        <section id="globalshowncallback">
            <h4 id="x2-4-3-globalshowncallback"><bdi class="secno">2.4.3 </bdi>
                <code>globalShownCallback</code>
            <a class="self-link" aria-label="§" href="#globalshowncallback"></a></h4>
            <p>
                If MiniApp enters the <a data-link-type="dfn" href="#dfn-shown" class="internalDFN" id="ref-for-dfn-shown-2">shown</a> <a data-link-type="dfn" href="#dfn-global-application-lifecycle-states" class="internalDFN" id="ref-for-dfn-global-application-lifecycle-states-8">global application lifecycle states</a>, or if MiniApp switches to be <a data-link-type="dfn" href="#dfn-running-in-foreground" class="internalDFN" id="ref-for-dfn-running-in-foreground-6">running in foreground</a> from <a data-link-type="dfn" href="#dfn-running-in-background" class="internalDFN" id="ref-for-dfn-running-in-background-7">running in background</a>, invoke <a data-link-type="idl" href="#dom-globalshowncallback" class="internalDFN" id="ref-for-dom-globalshowncallback-2"><code>GlobalShownCallback</code></a>.
            </p>
        </section>
        
        <section id="globalhiddencallback">
            <h4 id="x2-4-4-globalhiddencallback"><bdi class="secno">2.4.4 </bdi>
                <code>globalHiddenCallback</code>
            <a class="self-link" aria-label="§" href="#globalhiddencallback"></a></h4>
            <p>
                If MiniApp switches to be <a data-link-type="dfn" href="#dfn-running-in-background" class="internalDFN" id="ref-for-dfn-running-in-background-8">running in background</a> from <a data-link-type="dfn" href="#dfn-running-in-foreground" class="internalDFN" id="ref-for-dfn-running-in-foreground-7">running in foreground</a>, invoke <a data-link-type="idl" href="#dom-globalhiddencallback" class="internalDFN" id="ref-for-dom-globalhiddencallback-2"><code>GlobalHiddenCallback</code></a>.
            </p>
        </section>
        
        <section id="globalerrorcallback">
            <h4 id="x2-4-5-globalerrorcallback"><bdi class="secno">2.4.5 </bdi>
                <code>globalErrorCallback</code>
            <a class="self-link" aria-label="§" href="#globalerrorcallback"></a></h4>
            <p>
                If MiniApp MiniApp is confronted with script error, invoke <a data-link-type="idl" href="#dom-globalerrorcallback" class="internalDFN" id="ref-for-dom-globalerrorcallback-2"><code>GlobalErrorCallback</code></a>.
            </p>
        </section>
                   
        </section>
        
        <section data-dfn-for="InputObject" id="inputobject-interface">
            <h3 id="x2-5-inputobject-interface"><bdi class="secno">2.5 </bdi>
                <code>InputObject</code> interface
            <a class="self-link" aria-label="§" href="#inputobject-interface"></a></h3>
            <pre class="idl def" id="webidl-2090966171"><span class="idlHeader"><a class="self-link" href="#webidl-2090966171">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-inputobject" data-title="InputObject">[<span class="extAttr"><a data-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=<a data-type="interface" href="https://html.spec.whatwg.org/multipage/window-object.html#window">Window</a></span>]
interface <dfn data-export="" data-dfn-type="interface" id="dom-inputobject" data-idl="interface" data-title="InputObject" data-dfn-for="InputObject" class="idlID" tabindex="0" aria-haspopup="dialog"><code>InputObject</code></dfn> {<span data-idl="" class="idlAttribute" id="idl-def-inputobject-inputquery" data-title="inputQuery" data-dfn-for="InputObject">
    readonly attribute<span class="idlType"> <a data-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-inputobject-inputquery" id="ref-for-dom-inputobject-inputquery-1"><code>inputQuery</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-inputobject-pagepath" data-title="pagePath" data-dfn-for="InputObject">
    readonly attribute<span class="idlType"> <a data-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-inputobject-pagepath" id="ref-for-dom-inputobject-pagepath-1"><code>pagePath</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-inputobject-referrerinfo" data-title="referrerInfo" data-dfn-for="InputObject">
    readonly attribute<span class="idlType"> <a data-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-inputobject-referrerinfo" id="ref-for-dom-inputobject-referrerinfo-1"><code>referrerInfo</code></a>;</span>
};</span></code></pre>
            <section id="inputquery-attribute">
                <h4 id="x2-5-1-inputquery-attribute"><bdi class="secno">2.5.1 </bdi>
                    <code>inputQuery</code> attribute
                <a class="self-link" aria-label="§" href="#inputquery-attribute"></a></h4>
                <p>
                    The <dfn data-export="" data-dfn-type="attribute" id="dom-inputobject-inputquery" data-idl="attribute" data-title="inputQuery" data-dfn-for="InputObject" data-type="DOMString" data-lt="inputQuery" data-local-lt="InputObject.inputQuery" tabindex="0" aria-haspopup="dialog"><code>inputQuery</code></dfn> attribute contains inputted query for the MiniApp.
                </p>
            </section>
            
            <section id="pagepath-attribute">
                <h4 id="x2-5-2-pagepath-attribute"><bdi class="secno">2.5.2 </bdi>
                    <code>pagePath</code> attribute
                <a class="self-link" aria-label="§" href="#pagepath-attribute"></a></h4>
                <p>
                    The <dfn data-export="" data-dfn-type="attribute" id="dom-inputobject-pagepath" data-idl="attribute" data-title="pagePath" data-dfn-for="InputObject" data-type="DOMString" data-lt="pagePath" data-local-lt="InputObject.pagePath" tabindex="0" aria-haspopup="dialog"><code>pagePath</code></dfn> attribute contains the page path for current MiniApp.
                </p>
            </section>
            
            <section id="referrerinfo-attribute">
                <h4 id="x2-5-3-referrerinfo-attribute"><bdi class="secno">2.5.3 </bdi>
                    <code>referrerInfo</code> attribute
                <a class="self-link" aria-label="§" href="#referrerinfo-attribute"></a></h4>
                <p>
                    The <dfn data-export="" data-dfn-type="attribute" id="dom-inputobject-referrerinfo" data-idl="attribute" data-title="referrerInfo" data-dfn-for="InputObject" data-type="DOMString" data-lt="referrerInfo" data-local-lt="InputObject.referrerInfo" tabindex="0" aria-haspopup="dialog"><code>referrerInfo</code></dfn> attribute contains the source info for the MiniApp, including MiniApp ID, and optional extra data.
                </p>
            </section>
            
        </section>
        
        <section data-dfn-for="LifecycleError" id="lifecycleerror-interface">
            <h3 id="x2-6-lifecycleerror-interface"><bdi class="secno">2.6 </bdi>
                <code>LifecycleError</code> interface
            <a class="self-link" aria-label="§" href="#lifecycleerror-interface"></a></h3>
            <pre class="idl def" id="webidl-1557930575"><span class="idlHeader"><a class="self-link" href="#webidl-1557930575">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-lifecycleerror" data-title="LifecycleError">[<span class="extAttr"><a data-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=<a data-type="interface" href="https://html.spec.whatwg.org/multipage/window-object.html#window">Window</a></span>]
interface <dfn data-export="" data-dfn-type="interface" id="dom-lifecycleerror" data-idl="interface" data-title="LifecycleError" data-dfn-for="LifecycleError" class="idlID" tabindex="0" aria-haspopup="dialog"><code>LifecycleError</code></dfn> {<span data-idl="" class="idlAttribute" id="idl-def-lifecycleerror-errordescription" data-title="errorDescription" data-dfn-for="LifecycleError">
    readonly attribute<span class="idlType"> <a data-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-lifecycleerror-errordescription" id="ref-for-dom-lifecycleerror-errordescription-1"><code>errorDescription</code></a>;</span>
};</span></code></pre>
            
            <section id="errordescription-attribute">
                <h4 id="x2-6-1-errordescription-attribute"><bdi class="secno">2.6.1 </bdi>
                    <code>errorDescription</code> attribute
                <a class="self-link" aria-label="§" href="#errordescription-attribute"></a></h4>
                <p>
                    The <dfn data-export="" data-dfn-type="attribute" id="dom-lifecycleerror-errordescription" data-idl="attribute" data-title="errorDescription" data-dfn-for="LifecycleError" data-type="DOMString" data-lt="errorDescription" data-local-lt="LifecycleError.errorDescription" tabindex="0" aria-haspopup="dialog"><code>errorDescription</code></dfn> attribute is a developer-friendly textual description of the <a data-link-type="dfn" href="#dfn-error" class="internalDFN" id="ref-for-dfn-error-2">error</a> <a data-link-type="dfn" href="#dfn-global-application-lifecycle-states" class="internalDFN" id="ref-for-dfn-global-application-lifecycle-states-9">global application lifecycle states</a>.
                </p>
            </section>
        
       </section>
       
       </section>

        <section id="miniapp-page-lifecycle">
          <h2 id="x3-miniapp-page-lifecycle"><bdi class="secno">3. </bdi>MiniApp Page Lifecycle<a class="self-link" aria-label="§" href="#miniapp-page-lifecycle"></a></h2>
         <section id="miniapp-page-lifecycle-events">
          <h3 id="x3-1-miniapp-page-lifecycle-events"><bdi class="secno">3.1 </bdi>MiniApp Page Lifecycle Events<a class="self-link" aria-label="§" href="#miniapp-page-lifecycle-events"></a></h3>

          <p>This spec defines what the lifecycle of a MiniApp page is and adds definition to enable MiniApp to respond to five important <dfn data-dfn-for="Document" data-export="" id="dfn-page-lifecycle-events" tabindex="0" aria-haspopup="dialog">page lifecycle events</dfn> commonly performed by MiniApp:</p>
          <ul>
          <li>
            <p>MiniApp <dfn data-dfn-for="Document" data-export="" data-dfn-type="dfn" id="dfn-page-loading" tabindex="0" aria-haspopup="dialog">page loading</dfn></p>
          </li>
          <li>
            <p>MiniApp <dfn data-dfn-for="Document" data-export="" data-dfn-type="dfn" id="dfn-page-first-render-ready" tabindex="0" aria-haspopup="dialog">page first render ready</dfn></p>
          </li>
          <li>
            <p>MiniApp <dfn data-dfn-for="Document" data-export="" data-dfn-type="dfn" id="dfn-page-running-in-foreground" tabindex="0" aria-haspopup="dialog">page running in foreground</dfn></p>
          </li>
          <li>
            <p>MiniApp <dfn data-dfn-for="Document" data-export="" data-dfn-type="dfn" id="dfn-page-running-in-background" tabindex="0" aria-haspopup="dialog">page running in background</dfn></p>
          </li>
          <li>
            <p>MiniApp <dfn data-dfn-for="Document" data-export="" data-dfn-type="dfn" id="dfn-page-unloading" tabindex="0" aria-haspopup="dialog">page unloading</dfn></p>
          </li>
          </ul>
          
          <div class="note" role="note" id="issue-container-generatedID"><div role="heading" class="note-title marker" id="h-note" aria-level="4"><span>Note</span></div><aside class="">
            <p>
              When a MiniApp is launched, the process of rendering the first MiniApp page that is displayed to the user is called the <dfn data-dfn-for="Document" data-export="" data-dfn-type="dfn" id="dfn-first-render" tabindex="0" aria-haspopup="dialog">first render</dfn>.
            </p>
          </aside></div>
          
          

          <ol>
<li>
  <p>When user firstly opens a MiniApp, the MiniApp <a data-link-type="dfn" href="#dfn-initialization" class="internalDFN" id="ref-for-dfn-initialization-4">initialization</a> starts. <a data-link-type="dfn" href="#dfn-view-layer" class="internalDFN" id="ref-for-dfn-view-layer-1">View layer</a> and <a data-link-type="dfn" href="#dfn-logic-layer" class="internalDFN" id="ref-for-dfn-logic-layer-1">Logic layer</a> will simultaneously start the initialization.</p>
</li>
<li>
  <p>Once <a data-link-type="dfn" href="#dfn-logic-layer" class="internalDFN" id="ref-for-dfn-logic-layer-2">Logic layer</a> initialization is completed, it creates a MiniApp instance. Simultaneously, once <a data-link-type="dfn" href="#dfn-view-layer" class="internalDFN" id="ref-for-dfn-view-layer-2">View layer</a> initialization is completed, it starts the MiniApp <a data-link-type="dfn" href="#dfn-page-loading" class="internalDFN" id="ref-for-dfn-page-loading-1">page loading</a>, to establish communication channel between <a data-link-type="dfn" href="#dfn-view-layer" class="internalDFN" id="ref-for-dfn-view-layer-3">View layer</a> and <a data-link-type="dfn" href="#dfn-logic-layer" class="internalDFN" id="ref-for-dfn-logic-layer-3">Logic layer</a>.</p>
</li>
<li>
  <p>After the communication channel is established, <a data-link-type="dfn" href="#dfn-logic-layer" class="internalDFN" id="ref-for-dfn-logic-layer-4">Logic layer</a> sends the initial data to <a data-link-type="dfn" href="#dfn-view-layer" class="internalDFN" id="ref-for-dfn-view-layer-4">View layer</a> to start the <a data-link-type="dfn" href="#dfn-first-render" class="internalDFN" id="ref-for-dfn-first-render-1">first render</a>.</p>
</li>
<li>
  <p>If <a data-link-type="dfn" href="#dfn-view-layer" class="internalDFN" id="ref-for-dfn-view-layer-5">View layer</a> completes the page UI update based on the inputted initial data from <a data-link-type="dfn" href="#dfn-logic-layer" class="internalDFN" id="ref-for-dfn-logic-layer-5">Logic layer</a>, the <a data-link-type="dfn" href="#dfn-first-render" class="internalDFN" id="ref-for-dfn-first-render-2">first render</a> is considered as completed, and then <a data-link-type="dfn" href="#dfn-view-layer" class="internalDFN" id="ref-for-dfn-view-layer-6">View layer</a> notifies <a data-link-type="dfn" href="#dfn-logic-layer" class="internalDFN" id="ref-for-dfn-logic-layer-6">Logic layer</a>, to trigger the MiniApp <a data-link-type="dfn" href="#dfn-page-first-render-ready" class="internalDFN" id="ref-for-dfn-page-first-render-ready-1">page first render ready</a>.</p>
</li>
<li>
  <p>Afterwards, user can interact with MiniApp. <a data-link-type="dfn" href="#dfn-view-layer" class="internalDFN" id="ref-for-dfn-view-layer-7">View layer</a> can be triggered to deliver user event to <a data-link-type="dfn" href="#dfn-logic-layer" class="internalDFN" id="ref-for-dfn-logic-layer-7">Logic layer</a> for further processing, then <a data-link-type="dfn" href="#dfn-logic-layer" class="internalDFN" id="ref-for-dfn-logic-layer-8">Logic layer</a> returns result data to <a data-link-type="dfn" href="#dfn-view-layer" class="internalDFN" id="ref-for-dfn-view-layer-8">View layer</a> for re-render.</p>
</li>
<li>
  <p>
    If user leaves the current MiniApp page (e.g., by navigating to another MiniApp page), MiniApp <a data-link-type="dfn" href="#dfn-page-running-in-background" class="internalDFN" id="ref-for-dfn-page-running-in-background-1">page running in background</a> is triggered. If the MiniApp page is reopened, MiniApp <a data-link-type="dfn" href="#dfn-page-running-in-foreground" class="internalDFN" id="ref-for-dfn-page-running-in-foreground-1">page running in foreground</a> is triggered.
  </p>
</li>
<li>
  <p>
    If user closes the current MiniApp page, MiniApp <a data-link-type="dfn" href="#dfn-page-unloading" class="internalDFN" id="ref-for-dfn-page-unloading-1">page unloading</a> is triggered.
  </p>
  </li>
          </ol>
       </section>
       
       <section id="miniapp-page-lifecycle-states">
          <h3 id="x3-2-miniapp-page-lifecycle-states"><bdi class="secno">3.2 </bdi>MiniApp Page Lifecycle States<a class="self-link" aria-label="§" href="#miniapp-page-lifecycle-states"></a></h3>      
          <p>This spec formalizes five MiniApp <dfn data-dfn-for="Document" data-export="" id="dfn-page-lifecycle-states" tabindex="0" aria-haspopup="dialog">page lifecycle states</dfn> to support the above <a data-link-type="dfn" href="#dfn-page-lifecycle-events" class="internalDFN" id="ref-for-dfn-page-lifecycle-events-2">page lifecycle events</a>:</p>
          
          <dl>
            <dt>
                <dfn data-dfn-for="Document" data-export="" data-dfn-type="dfn" id="dfn-page-loaded" tabindex="0" aria-haspopup="dialog">page loaded</dfn>
            </dt>
            <dd>
                Lifecycle state for MiniApp <a data-link-type="dfn" href="#dfn-page-loading" class="internalDFN" id="ref-for-dfn-page-loading-2">page loading</a>. This means that MiniApp <a data-link-type="dfn" href="#dfn-page-loading" class="internalDFN" id="ref-for-dfn-page-loading-3">page loading</a> is completed. At this moment, <a data-link-type="dfn" href="#dfn-logic-layer" class="internalDFN" id="ref-for-dfn-logic-layer-9">Logic layer</a> has obtained initialization data, and developer can obtain the path of current MiniApp page as well as the path’s query. 
            </dd>
            
            <dt>
                <dfn data-dfn-for="Document" data-export="" data-dfn-type="dfn" id="dfn-page-ready" tabindex="0" aria-haspopup="dialog">page ready</dfn>
            </dt>
            <dd>
                Lifecycle state for MiniApp <a data-link-type="dfn" href="#dfn-page-first-render-ready" class="internalDFN" id="ref-for-dfn-page-first-render-ready-2">page first render ready</a>. It is triggered once the MiniApp page <a data-link-type="dfn" href="#dfn-first-render" class="internalDFN" id="ref-for-dfn-first-render-3">first render</a> is completed. At this moment, the page UI can be configured.
            </dd>
            
            <dt>
                <dfn data-dfn-for="Document" data-export="" data-dfn-type="dfn" id="dfn-page-shown" tabindex="0" aria-haspopup="dialog">page shown</dfn>
            </dt>
            <dd>
                Lifecycle state for MiniApp <a data-link-type="dfn" href="#dfn-page-running-in-foreground" class="internalDFN" id="ref-for-dfn-page-running-in-foreground-2">page running in foreground</a>. It is triggered once the page switches to be <a data-link-type="dfn" href="#dfn-page-running-in-foreground" class="internalDFN" id="ref-for-dfn-page-running-in-foreground-3">page running in foreground</a> from <a data-link-type="dfn" href="#dfn-page-running-in-background" class="internalDFN" id="ref-for-dfn-page-running-in-background-2">page running in background</a>. At this moment, developer can update data and refresh page.
            </dd>
            
            <dt>
                <dfn data-dfn-for="Document" data-export="" data-dfn-type="dfn" id="dfn-page-hidden" tabindex="0" aria-haspopup="dialog">page hidden</dfn>
            </dt>
            <dd>
                Lifecycle state for MiniApp <a data-link-type="dfn" href="#dfn-page-running-in-background" class="internalDFN" id="ref-for-dfn-page-running-in-background-3">page running in background</a>. It is triggered once the MiniApp page switches to be <a data-link-type="dfn" href="#dfn-page-running-in-foreground" class="internalDFN" id="ref-for-dfn-page-running-in-foreground-4">page running in foreground</a> to <a data-link-type="dfn" href="#dfn-page-running-in-background" class="internalDFN" id="ref-for-dfn-page-running-in-background-4">page running in background</a>.
            </dd>
            
            <dt>
                <dfn data-dfn-for="Document" data-export="" data-dfn-type="dfn" id="dfn-page-unloaded" tabindex="0" aria-haspopup="dialog">page unloaded</dfn>
            </dt>
            <dd>
                Lifecycle state for MiniApp <a data-link-type="dfn" href="#dfn-page-unloading" class="internalDFN" id="ref-for-dfn-page-unloading-2">page unloading</a>. It is triggered once the MiniApp page is closed.
            </dd>
            
          </dl>
       </section>
       
       <section data-dfn-for="PageState" id="pagestate-enum">
          <h3 id="x3-3-pagestate-enum"><bdi class="secno">3.3 </bdi>
            <code>PageState</code> enum
          <a class="self-link" aria-label="§" href="#pagestate-enum"></a></h3>
          <p>The MiniApp <a data-link-type="dfn" href="#dfn-page-lifecycle-states" class="internalDFN" id="ref-for-dfn-page-lifecycle-states-2">page lifecycle states</a> are reflected in the API via the <a data-link-type="idl" href="#dom-pagestate" class="internalDFN" id="ref-for-dom-pagestate-1"><code>PageState</code></a> enum.</p>
            
          <pre class="idl def" id="webidl-927692399"><span class="idlHeader"><a class="self-link" href="#webidl-927692399">WebIDL</a></span><code><span data-idl="" class="idlEnum" id="idl-def-pagestate" data-title="PageState">enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-pagestate" id="ref-for-dom-pagestate-2"><code>PageState</code></a> {
    <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-pagestate-loaded" id="ref-for-dom-pagestate-loaded-1"><code>loaded</code></a>"</span>, <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-pagestate-ready" id="ref-for-dom-pagestate-ready-1"><code>ready</code></a>"</span>, <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-pagestate-shown" id="ref-for-dom-pagestate-shown-1"><code>shown</code></a>"</span>, <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-pagestate-hidden" id="ref-for-dom-pagestate-hidden-1"><code>hidden</code></a>"</span>, <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-pagestate-unloaded" id="ref-for-dom-pagestate-unloaded-1"><code>unloaded</code></a>"</span>
};</span></code></pre> 
          
          <p>
            The <dfn data-export="" data-dfn-type="enum" id="dom-pagestate" data-idl="enum" data-title="PageState" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>PageState</code></dfn> enum is used to represent the MiniApp <a data-link-type="dfn" href="#dfn-page-lifecycle-states" class="internalDFN" id="ref-for-dfn-page-lifecycle-states-3">page lifecycle states</a>.
          </p>
          <p>
            The "<dfn data-export="" data-dfn-type="enum-value" id="dom-pagestate-loaded" data-idl="enum-value" data-title="loaded" data-dfn-for="PageState" tabindex="0" aria-haspopup="dialog"><code>loaded</code></dfn>" enum value represents the <a data-link-type="dfn" href="#dfn-page-loaded" class="internalDFN" id="ref-for-dfn-page-loaded-1">page loaded</a>
            <a data-link-type="dfn" href="#dfn-page-lifecycle-states" class="internalDFN" id="ref-for-dfn-page-lifecycle-states-4">page lifecycle states</a>.
         </p>
         <p>
            The "<dfn data-export="" data-dfn-type="enum-value" id="dom-pagestate-ready" data-idl="enum-value" data-title="ready" data-dfn-for="PageState" tabindex="0" aria-haspopup="dialog"><code>ready</code></dfn>" enum value represents the <a data-link-type="dfn" href="#dfn-page-ready" class="internalDFN" id="ref-for-dfn-page-ready-1">page ready</a>
            <a data-link-type="dfn" href="#dfn-page-lifecycle-states" class="internalDFN" id="ref-for-dfn-page-lifecycle-states-5">page lifecycle states</a>.
         </p>
          <p>
            The "<dfn data-export="" data-dfn-type="enum-value" id="dom-pagestate-shown" data-idl="enum-value" data-title="shown" data-dfn-for="PageState" tabindex="0" aria-haspopup="dialog"><code>shown</code></dfn>" enum value represents the <a data-link-type="dfn" href="#dfn-page-shown" class="internalDFN" id="ref-for-dfn-page-shown-1">page shown</a>
            <a data-link-type="dfn" href="#dfn-page-lifecycle-states" class="internalDFN" id="ref-for-dfn-page-lifecycle-states-6">page lifecycle states</a>.
         </p>
         <p>
            The "<dfn data-export="" data-dfn-type="enum-value" id="dom-pagestate-hidden" data-idl="enum-value" data-title="hidden" data-dfn-for="PageState" tabindex="0" aria-haspopup="dialog"><code>hidden</code></dfn>" enum value represents the <a data-link-type="dfn" href="#dfn-page-hidden" class="internalDFN" id="ref-for-dfn-page-hidden-1">page hidden</a>
            <a data-link-type="dfn" href="#dfn-page-lifecycle-states" class="internalDFN" id="ref-for-dfn-page-lifecycle-states-7">page lifecycle states</a>.
         </p>
         <p>
            The "<dfn data-export="" data-dfn-type="enum-value" id="dom-pagestate-unloaded" data-idl="enum-value" data-title="unloaded" data-dfn-for="PageState" tabindex="0" aria-haspopup="dialog"><code>unloaded</code></dfn>" enum value represents the <a data-link-type="dfn" href="#dfn-page-unloaded" class="internalDFN" id="ref-for-dfn-page-unloaded-1">page unloaded</a>
            <a data-link-type="dfn" href="#dfn-page-lifecycle-states" class="internalDFN" id="ref-for-dfn-page-lifecycle-states-8">page lifecycle states</a>.
         </p>
          
        </section>
       
       <section data-dfn-for="Page" id="miniapp-page-lifecycle-interface-and-callbacks">
       
        <h3 id="x3-4-miniapp-page-lifecycle-interface-and-callbacks"><bdi class="secno">3.4 </bdi>MiniApp Page Lifecycle interface and callbacks<a class="self-link" aria-label="§" href="#miniapp-page-lifecycle-interface-and-callbacks"></a></h3>
          
          <pre class="idl def" id="webidl-1794268897"><span class="idlHeader"><a class="self-link" href="#webidl-1794268897">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-page" data-title="Page"> [<span class="extAttr"><a data-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=<a data-type="interface" href="https://html.spec.whatwg.org/multipage/window-object.html#window">Window</a></span>]
 interface <dfn data-export="" data-dfn-type="interface" id="dom-page" data-idl="interface" data-title="Page" data-dfn-for="Page" class="idlID" tabindex="0" aria-haspopup="dialog"><code>Page</code></dfn> {<span data-idl="" class="idlMethod" id="idl-def-page-getpagestate-pageloadedcallback-pagereadycallback-pageshowncallback-pagehiddencallback-pageunloadedcallback" data-title="getPageState" data-dfn-for="Page"><span class="idlType">
  <a data-type="interface" href="https://heycam.github.io/webidl/#idl-undefined">undefined</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-page-getpagestate" id="ref-for-dom-page-getpagestate-1"><code>getPageState</code></a> (<span class="idlType">
      <a href="#dom-pageloadedcallback" class="internalDFN" data-link-type="idl" id="ref-for-dom-pageloadedcallback-1"><code>PageLoadedCallback</code></a></span> <span class="idlParamName">pageLoadedCallback</span>,<span class="idlType">
      <a href="#dom-pagereadycallback" class="internalDFN" data-link-type="idl" id="ref-for-dom-pagereadycallback-1"><code>PageReadyCallback</code></a></span> <span class="idlParamName">pageReadyCallback</span>,<span class="idlType">
      <a href="#dom-pageshowncallback" class="internalDFN" data-link-type="idl" id="ref-for-dom-pageshowncallback-1"><code>PageShownCallback</code></a></span> <span class="idlParamName">pageShownCallback</span>,<span class="idlType">
      <a href="#dom-pagehiddencallback" class="internalDFN" data-link-type="idl" id="ref-for-dom-pagehiddencallback-1"><code>PageHiddenCallback</code></a></span> <span class="idlParamName">pageHiddenCallback</span>,<span class="idlType">
      <a href="#dom-pageunloadedcallback" class="internalDFN" data-link-type="idl" id="ref-for-dom-pageunloadedcallback-1"><code>PageUnloadedCallback</code></a></span> <span class="idlParamName">pageUnloadedCallback</span>
  );</span>
 };</span><span data-idl="" class="idlCallback" id="idl-def-pageloadedcallback" data-title="PageLoadedCallback">

callback <dfn data-export="" data-dfn-type="callback" id="dom-pageloadedcallback" data-idl="callback" data-title="PageLoadedCallback" data-dfn-for="PageLoadedCallback" class="idlID" tabindex="0" aria-haspopup="dialog"><code>PageLoadedCallback</code></dfn> =<span class="idlType"> <a data-type="interface" href="https://heycam.github.io/webidl/#idl-undefined">undefined</a></span> (<span class="idlType">
  <a href="#dom-pageinputobject" class="internalDFN" data-link-type="idl" id="ref-for-dom-pageinputobject-1"><code>PageInputObject</code></a></span> <span class="idlParamName">pageInputObject</span>
);</span><span data-idl="" class="idlCallback" id="idl-def-pagereadycallback" data-title="PageReadyCallback">

callback <dfn data-export="" data-dfn-type="callback" id="dom-pagereadycallback" data-idl="callback" data-title="PageReadyCallback" data-dfn-for="PageReadyCallback" class="idlID" tabindex="0" aria-haspopup="dialog"><code>PageReadyCallback</code></dfn> =<span class="idlType"> <a data-type="interface" href="https://heycam.github.io/webidl/#idl-undefined">undefined</a></span> (
);</span><span data-idl="" class="idlCallback" id="idl-def-pageshowncallback" data-title="PageShownCallback">

callback <dfn data-export="" data-dfn-type="callback" id="dom-pageshowncallback" data-idl="callback" data-title="PageShownCallback" data-dfn-for="PageShownCallback" class="idlID" tabindex="0" aria-haspopup="dialog"><code>PageShownCallback</code></dfn> =<span class="idlType"> <a data-type="interface" href="https://heycam.github.io/webidl/#idl-undefined">undefined</a></span> (
);</span><span data-idl="" class="idlCallback" id="idl-def-pagehiddencallback" data-title="PageHiddenCallback">

callback <dfn data-export="" data-dfn-type="callback" id="dom-pagehiddencallback" data-idl="callback" data-title="PageHiddenCallback" data-dfn-for="PageHiddenCallback" class="idlID" tabindex="0" aria-haspopup="dialog"><code>PageHiddenCallback</code></dfn> =<span class="idlType"> <a data-type="interface" href="https://heycam.github.io/webidl/#idl-undefined">undefined</a></span> (
);</span><span data-idl="" class="idlCallback" id="idl-def-pageunloadedcallback" data-title="PageUnloadedCallback">

callback <dfn data-export="" data-dfn-type="callback" id="dom-pageunloadedcallback" data-idl="callback" data-title="PageUnloadedCallback" data-dfn-for="PageUnloadedCallback" class="idlID" tabindex="0" aria-haspopup="dialog"><code>PageUnloadedCallback</code></dfn> =<span class="idlType"> <a data-type="interface" href="https://heycam.github.io/webidl/#idl-undefined">undefined</a></span> (
);</span></code></pre>
         
         <section id="getpagestate-method">
            <h4 id="x3-4-1-getpagestate-method"><bdi class="secno">3.4.1 </bdi>
                <code>getPageState()</code> method
            <a class="self-link" aria-label="§" href="#getpagestate-method"></a></h4>
            <p>
                When <dfn data-export="" data-dfn-type="method" id="dom-page-getpagestate" data-idl="operation" data-title="getPageState()" data-dfn-for="Page" data-type="undefined" data-lt="getPageState()|getPageState(pageLoadedCallback, pageReadyCallback, pageShownCallback, pageHiddenCallback, pageUnloadedCallback)" data-local-lt="Page.getPageState|Page.getPageState()|getPageState" tabindex="0" aria-haspopup="dialog"><code>getPageState()</code></dfn> is invoked, the user agent <em class="rfc2119">MUST</em>:
            </p>
            <ol class="algorithm">
                <li>Request page lifecycle state, passing pageLoadedCallback, pageReadyCallback, pageShownCallback, pageHiddenCallback, and pageUnloadedCallback.
                </li>
                <li>Return <code>undefined</code>.
                </li>
            </ol>
        </section>
        
        <section id="pageloadedcallback">
            <h4 id="x3-4-2-pageloadedcallback"><bdi class="secno">3.4.2 </bdi>
                <code>pageLoadedCallback</code>
            <a class="self-link" aria-label="§" href="#pageloadedcallback"></a></h4>
            <p>
                If a communication channel has been established between <a data-link-type="dfn" href="#dfn-view-layer" class="internalDFN" id="ref-for-dfn-view-layer-9">View layer</a> and <a data-link-type="dfn" href="#dfn-logic-layer" class="internalDFN" id="ref-for-dfn-logic-layer-10">Logic layer</a>, invoke <a data-link-type="idl" href="#dom-pageloadedcallback" class="internalDFN" id="ref-for-dom-pageloadedcallback-2"><code>PageLoadedCallback</code></a>.
            </p>
        </section>
        
        <section id="pagereadycallback">
            <h4 id="x3-4-3-pagereadycallback"><bdi class="secno">3.4.3 </bdi>
                <code>pageReadyCallback</code>
            <a class="self-link" aria-label="§" href="#pagereadycallback"></a></h4>
            <p>
                If MiniApp page <a data-link-type="dfn" href="#dfn-first-render" class="internalDFN" id="ref-for-dfn-first-render-4">first render</a> is completed, invoke <a data-link-type="idl" href="#dom-pagereadycallback" class="internalDFN" id="ref-for-dom-pagereadycallback-2"><code>PageReadyCallback</code></a>.
            </p>
        </section>
        
        <section id="pageshowncallback">
            <h4 id="x3-4-4-pageshowncallback"><bdi class="secno">3.4.4 </bdi>
                <code>pageShownCallback</code>
            <a class="self-link" aria-label="§" href="#pageshowncallback"></a></h4>
            <p>
                If MiniApp page switches to be <a data-link-type="dfn" href="#dfn-page-running-in-foreground" class="internalDFN" id="ref-for-dfn-page-running-in-foreground-5">page running in foreground</a> from <a data-link-type="dfn" href="#dfn-page-running-in-background" class="internalDFN" id="ref-for-dfn-page-running-in-background-5">page running in background</a>, invoke <a data-link-type="idl" href="#dom-pageshowncallback" class="internalDFN" id="ref-for-dom-pageshowncallback-2"><code>PageShownCallback</code></a>.
            </p>
        </section>
        
        <section id="pagehiddencallback">
            <h4 id="x3-4-5-pagehiddencallback"><bdi class="secno">3.4.5 </bdi>
                <code>pageHiddenCallback</code>
            <a class="self-link" aria-label="§" href="#pagehiddencallback"></a></h4>
            <p>
                If MiniApp page switches to be <a data-link-type="dfn" href="#dfn-page-running-in-background" class="internalDFN" id="ref-for-dfn-page-running-in-background-6">page running in background</a> from <a data-link-type="dfn" href="#dfn-page-running-in-foreground" class="internalDFN" id="ref-for-dfn-page-running-in-foreground-6">page running in foreground</a>, invoke <a data-link-type="idl" href="#dom-pagehiddencallback" class="internalDFN" id="ref-for-dom-pagehiddencallback-2"><code>PageHiddenCallback</code></a>.
            </p>
        </section>
        
        <section id="pageunloadedcallback">
            <h4 id="x3-4-6-pageunloadedcallback"><bdi class="secno">3.4.6 </bdi>
                <code>pageUnloadedCallback</code>
            <a class="self-link" aria-label="§" href="#pageunloadedcallback"></a></h4>
            <p>
                If MiniApp page is closed, invoke <a data-link-type="idl" href="#dom-pageunloadedcallback" class="internalDFN" id="ref-for-dom-pageunloadedcallback-2"><code>PageUnloadedCallback</code></a>.
            </p>
        </section>
       
       </section>
       
       <section data-dfn-for="PageInputObject" id="pageinputobject-interface">
            <h3 id="x3-5-pageinputobject-interface"><bdi class="secno">3.5 </bdi>
                <code>PageInputObject</code> interface
            <a class="self-link" aria-label="§" href="#pageinputobject-interface"></a></h3>
            <pre class="idl def" id="webidl-1892177630"><span class="idlHeader"><a class="self-link" href="#webidl-1892177630">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-pageinputobject" data-title="PageInputObject">[<span class="extAttr"><a data-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=<a data-type="interface" href="https://html.spec.whatwg.org/multipage/window-object.html#window">Window</a></span>]
interface <dfn data-export="" data-dfn-type="interface" id="dom-pageinputobject" data-idl="interface" data-title="PageInputObject" data-dfn-for="PageInputObject" class="idlID" tabindex="0" aria-haspopup="dialog"><code>PageInputObject</code></dfn> {<span data-idl="" class="idlAttribute" id="idl-def-pageinputobject-pageinputquery" data-title="pageInputQuery" data-dfn-for="PageInputObject">
    readonly attribute<span class="idlType"> <a data-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pageinputobject-pageinputquery" id="ref-for-dom-pageinputobject-pageinputquery-1"><code>pageInputQuery</code></a>;</span>
};</span></code></pre>
            <section id="pageinputquery-attribute">
                <h4 id="x3-5-1-pageinputquery-attribute"><bdi class="secno">3.5.1 </bdi>
                    <code>pageInputQuery</code> attribute
                <a class="self-link" aria-label="§" href="#pageinputquery-attribute"></a></h4>
                <p>
                    The <dfn data-export="" data-dfn-type="attribute" id="dom-pageinputobject-pageinputquery" data-idl="attribute" data-title="pageInputQuery" data-dfn-for="PageInputObject" data-type="DOMString" data-lt="pageInputQuery" data-local-lt="PageInputObject.pageInputQuery" tabindex="0" aria-haspopup="dialog"><code>pageInputQuery</code></dfn> attribute contains inputted query for the MiniApp page.
                </p>
            </section>
                        
        </section>
       
       
        </section>

     <section class="informative" id="privacy-and-security">
      <h2 id="x4-privacy-and-security"><bdi class="secno">4. </bdi>Privacy and Security<a class="self-link" aria-label="§" href="#privacy-and-security"></a></h2><p><em>This section is non-normative.</em></p>
      
         
        
        <p>
          MiniApp <a data-link-type="dfn" href="#dfn-running-in-foreground" class="internalDFN" id="ref-for-dfn-running-in-foreground-8">running in foreground</a> and <a data-link-type="dfn" href="#dfn-running-in-background" class="internalDFN" id="ref-for-dfn-running-in-background-9">running in background</a> event enables developer to know when a MiniApp is visible. By use of <a data-link-type="dfn" href="#dfn-page-running-in-foreground" class="internalDFN" id="ref-for-dfn-page-running-in-foreground-7">page running in foreground</a> event, developer can choose to process and hide the sensitive data, before MiniApp page switches to be <a data-link-type="dfn" href="#dfn-page-running-in-foreground" class="internalDFN" id="ref-for-dfn-page-running-in-foreground-8">page running in foreground</a>; the&nbsp;<a data-link-type="dfn" href="#dfn-page-unloaded" class="internalDFN" id="ref-for-dfn-page-unloaded-2">page unloaded</a>&nbsp;event provides a notification that the page is being unloaded.
        </p>
        
         
     </section>
    
    



<section id="references" class="appendix"><h2 id="a-references"><bdi class="secno">A. </bdi>References<a class="self-link" aria-label="§" href="#references"></a></h2><section id="informative-references">
    <h3 id="a-1-informative-references"><bdi class="secno">A.1 </bdi>Informative references<a class="self-link" aria-label="§" href="#informative-references"></a></h3>
    <dl class="bibliography"><dt id="bib-html">[HTML]</dt><dd><a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Anne van Kesteren; Domenic Denicola; Ian Hickson; Philip Jägenstedt; Simon Pieters.  WHATWG. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a></dd><dt id="bib-webidl">[webidl]</dt><dd><a href="https://heycam.github.io/webidl/"><cite>Web IDL</cite></a>. Boris Zbarsky.  W3C. 15 December 2016. W3C Editor's Draft. URL: <a href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a></dd></dl>
  </section></section><p role="navigation" id="back-to-top">
    <a href="#title"><abbr title="Back to Top">↑</abbr></a>
  </p><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-view-layer" aria-label="Links in this document to definition: View layer">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-view-layer" aria-label="Permalink for definition: View layer. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-view-layer-1" title="§ 3.1 MiniApp Page Lifecycle Events">§ 3.1 MiniApp Page Lifecycle Events</a> <a href="#ref-for-dfn-view-layer-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-view-layer-3" title="Reference 3">(3)</a> <a href="#ref-for-dfn-view-layer-4" title="Reference 4">(4)</a> <a href="#ref-for-dfn-view-layer-5" title="Reference 5">(5)</a> <a href="#ref-for-dfn-view-layer-6" title="Reference 6">(6)</a> <a href="#ref-for-dfn-view-layer-7" title="Reference 7">(7)</a> <a href="#ref-for-dfn-view-layer-8" title="Reference 8">(8)</a> 
  </li><li>
    <a href="#ref-for-dfn-view-layer-9" title="§ 3.4.2 pageLoadedCallback">§ 3.4.2 pageLoadedCallback</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-logic-layer" aria-label="Links in this document to definition: Logic layer">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-logic-layer" aria-label="Permalink for definition: Logic layer. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-logic-layer-1" title="§ 3.1 MiniApp Page Lifecycle Events">§ 3.1 MiniApp Page Lifecycle Events</a> <a href="#ref-for-dfn-logic-layer-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-logic-layer-3" title="Reference 3">(3)</a> <a href="#ref-for-dfn-logic-layer-4" title="Reference 4">(4)</a> <a href="#ref-for-dfn-logic-layer-5" title="Reference 5">(5)</a> <a href="#ref-for-dfn-logic-layer-6" title="Reference 6">(6)</a> <a href="#ref-for-dfn-logic-layer-7" title="Reference 7">(7)</a> <a href="#ref-for-dfn-logic-layer-8" title="Reference 8">(8)</a> 
  </li><li>
    <a href="#ref-for-dfn-logic-layer-9" title="§ 3.2 MiniApp Page Lifecycle States">§ 3.2 MiniApp Page Lifecycle States</a> 
  </li><li>
    <a href="#ref-for-dfn-logic-layer-10" title="§ 3.4.2 pageLoadedCallback">§ 3.4.2 pageLoadedCallback</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-global-application-lifecycle-events" aria-label="Links in this document to definition: global application lifecycle events">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-global-application-lifecycle-events" aria-label="Permalink for definition: global application lifecycle events. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-global-application-lifecycle-events-1" title="§ 1. Background">§ 1. Background</a> 
  </li><li>
    <a href="#ref-for-dfn-global-application-lifecycle-events-2" title="§ 2.2 MiniApp Global Application Lifecycle States">§ 2.2 MiniApp Global Application Lifecycle States</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-initialization" aria-label="Links in this document to definition: initialization">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-initialization" aria-label="Permalink for definition: initialization. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-initialization-1" title="§ 2.1 MiniApp Global Application Lifecycle Events">§ 2.1 MiniApp Global Application Lifecycle Events</a> 
  </li><li>
    <a href="#ref-for-dfn-initialization-2" title="§ 2.2 MiniApp Global Application Lifecycle States">§ 2.2 MiniApp Global Application Lifecycle States</a> <a href="#ref-for-dfn-initialization-3" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-initialization-4" title="§ 3.1 MiniApp Page Lifecycle Events">§ 3.1 MiniApp Page Lifecycle Events</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-running-in-foreground" aria-label="Links in this document to definition: running in foreground">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-running-in-foreground" aria-label="Permalink for definition: running in foreground. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-running-in-foreground-1" title="§ 2.1 MiniApp Global Application Lifecycle Events">§ 2.1 MiniApp Global Application Lifecycle Events</a> <a href="#ref-for-dfn-running-in-foreground-2" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-running-in-foreground-3" title="§ 2.2 MiniApp Global Application Lifecycle States">§ 2.2 MiniApp Global Application Lifecycle States</a> <a href="#ref-for-dfn-running-in-foreground-4" title="Reference 2">(2)</a> <a href="#ref-for-dfn-running-in-foreground-5" title="Reference 3">(3)</a> 
  </li><li>
    <a href="#ref-for-dfn-running-in-foreground-6" title="§ 2.4.3 globalShownCallback">§ 2.4.3 globalShownCallback</a> 
  </li><li>
    <a href="#ref-for-dfn-running-in-foreground-7" title="§ 2.4.4 globalHiddenCallback">§ 2.4.4 globalHiddenCallback</a> 
  </li><li>
    <a href="#ref-for-dfn-running-in-foreground-8" title="§ 4. Privacy and Security">§ 4. Privacy and Security</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-running-in-background" aria-label="Links in this document to definition: running in background">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-running-in-background" aria-label="Permalink for definition: running in background. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-running-in-background-1" title="§ 2.1 MiniApp Global Application Lifecycle Events">§ 2.1 MiniApp Global Application Lifecycle Events</a> <a href="#ref-for-dfn-running-in-background-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-running-in-background-3" title="Reference 3">(3)</a> 
  </li><li>
    <a href="#ref-for-dfn-running-in-background-4" title="§ 2.2 MiniApp Global Application Lifecycle States">§ 2.2 MiniApp Global Application Lifecycle States</a> <a href="#ref-for-dfn-running-in-background-5" title="Reference 2">(2)</a> <a href="#ref-for-dfn-running-in-background-6" title="Reference 3">(3)</a> 
  </li><li>
    <a href="#ref-for-dfn-running-in-background-7" title="§ 2.4.3 globalShownCallback">§ 2.4.3 globalShownCallback</a> 
  </li><li>
    <a href="#ref-for-dfn-running-in-background-8" title="§ 2.4.4 globalHiddenCallback">§ 2.4.4 globalHiddenCallback</a> 
  </li><li>
    <a href="#ref-for-dfn-running-in-background-9" title="§ 4. Privacy and Security">§ 4. Privacy and Security</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-in-error" aria-label="Links in this document to definition: in error">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-in-error" aria-label="Permalink for definition: in error. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-in-error-1" title="§ 2.2 MiniApp Global Application Lifecycle States">§ 2.2 MiniApp Global Application Lifecycle States</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-global-application-lifecycle-states" aria-label="Links in this document to definition: global application lifecycle states">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-global-application-lifecycle-states" aria-label="Permalink for definition: global application lifecycle states. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-global-application-lifecycle-states-1" title="§ 1. Background">§ 1. Background</a> 
  </li><li>
    <a href="#ref-for-dfn-global-application-lifecycle-states-2" title="§ 2.3 GlobalState enum">§ 2.3 GlobalState enum</a> <a href="#ref-for-dfn-global-application-lifecycle-states-3" title="Reference 2">(2)</a> <a href="#ref-for-dfn-global-application-lifecycle-states-4" title="Reference 3">(3)</a> <a href="#ref-for-dfn-global-application-lifecycle-states-5" title="Reference 4">(4)</a> <a href="#ref-for-dfn-global-application-lifecycle-states-6" title="Reference 5">(5)</a> <a href="#ref-for-dfn-global-application-lifecycle-states-7" title="Reference 6">(6)</a> 
  </li><li>
    <a href="#ref-for-dfn-global-application-lifecycle-states-8" title="§ 2.4.3 globalShownCallback">§ 2.4.3 globalShownCallback</a> 
  </li><li>
    <a href="#ref-for-dfn-global-application-lifecycle-states-9" title="§ 2.6.1 errorDescription attribute">§ 2.6.1 errorDescription attribute</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-launched" aria-label="Links in this document to definition: launched">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-launched" aria-label="Permalink for definition: launched. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-launched-1" title="§ 2.2 MiniApp Global Application Lifecycle States">§ 2.2 MiniApp Global Application Lifecycle States</a> 
  </li><li>
    <a href="#ref-for-dfn-launched-2" title="§ 2.3 GlobalState enum">§ 2.3 GlobalState enum</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-shown" aria-label="Links in this document to definition: shown">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-shown" aria-label="Permalink for definition: shown. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-shown-1" title="§ 2.3 GlobalState enum">§ 2.3 GlobalState enum</a> 
  </li><li>
    <a href="#ref-for-dfn-shown-2" title="§ 2.4.3 globalShownCallback">§ 2.4.3 globalShownCallback</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-hidden" aria-label="Links in this document to definition: hidden">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-hidden" aria-label="Permalink for definition: hidden. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-hidden-1" title="§ 2.3 GlobalState enum">§ 2.3 GlobalState enum</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-error" aria-label="Links in this document to definition: error">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-error" aria-label="Permalink for definition: error. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-error-1" title="§ 2.3 GlobalState enum">§ 2.3 GlobalState enum</a> 
  </li><li>
    <a href="#ref-for-dfn-error-2" title="§ 2.6.1 errorDescription attribute">§ 2.6.1 errorDescription attribute</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-globalstate" aria-label="Links in this document to definition: GlobalState">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-globalstate" aria-label="Permalink for definition: GlobalState. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-2044944987">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-globalstate-1" title="§ 2.3 GlobalState enum">§ 2.3 GlobalState enum</a> <a href="#ref-for-dom-globalstate-2" title="Reference 2">(2)</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-globalstate-launched" aria-label="Links in this document to definition: launched">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-globalstate-launched" aria-label="Permalink for definition: launched. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-2044944987">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-globalstate-launched-1" title="§ 2.3 GlobalState enum">§ 2.3 GlobalState enum</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-globalstate-shown" aria-label="Links in this document to definition: shown">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-globalstate-shown" aria-label="Permalink for definition: shown. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-2044944987">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-globalstate-shown-1" title="§ 2.3 GlobalState enum">§ 2.3 GlobalState enum</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-globalstate-hidden" aria-label="Links in this document to definition: hidden">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-globalstate-hidden" aria-label="Permalink for definition: hidden. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-2044944987">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-globalstate-hidden-1" title="§ 2.3 GlobalState enum">§ 2.3 GlobalState enum</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-globalstate-error" aria-label="Links in this document to definition: error">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-globalstate-error" aria-label="Permalink for definition: error. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-2044944987">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-globalstate-error-1" title="§ 2.3 GlobalState enum">§ 2.3 GlobalState enum</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-global" aria-label="Links in this document to definition: Global">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-global" aria-label="Permalink for definition: Global. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-globallaunchedcallback" aria-label="Links in this document to definition: GlobalLaunchedCallback">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-globallaunchedcallback" aria-label="Permalink for definition: GlobalLaunchedCallback. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-globallaunchedcallback-1" title="§ 2.4 MiniApp Global Application Lifecycle interface and callbacks">§ 2.4 MiniApp Global Application Lifecycle interface and callbacks</a> 
  </li><li>
    <a href="#ref-for-dom-globallaunchedcallback-2" title="§ 2.4.2 globalLaunchedCallback">§ 2.4.2 globalLaunchedCallback</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-globalshowncallback" aria-label="Links in this document to definition: GlobalShownCallback">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-globalshowncallback" aria-label="Permalink for definition: GlobalShownCallback. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-globalshowncallback-1" title="§ 2.4 MiniApp Global Application Lifecycle interface and callbacks">§ 2.4 MiniApp Global Application Lifecycle interface and callbacks</a> 
  </li><li>
    <a href="#ref-for-dom-globalshowncallback-2" title="§ 2.4.3 globalShownCallback">§ 2.4.3 globalShownCallback</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-globalhiddencallback" aria-label="Links in this document to definition: GlobalHiddenCallback">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-globalhiddencallback" aria-label="Permalink for definition: GlobalHiddenCallback. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-globalhiddencallback-1" title="§ 2.4 MiniApp Global Application Lifecycle interface and callbacks">§ 2.4 MiniApp Global Application Lifecycle interface and callbacks</a> 
  </li><li>
    <a href="#ref-for-dom-globalhiddencallback-2" title="§ 2.4.4 globalHiddenCallback">§ 2.4.4 globalHiddenCallback</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-globalerrorcallback" aria-label="Links in this document to definition: GlobalErrorCallback">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-globalerrorcallback" aria-label="Permalink for definition: GlobalErrorCallback. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-globalerrorcallback-1" title="§ 2.4 MiniApp Global Application Lifecycle interface and callbacks">§ 2.4 MiniApp Global Application Lifecycle interface and callbacks</a> 
  </li><li>
    <a href="#ref-for-dom-globalerrorcallback-2" title="§ 2.4.5 globalErrorCallback">§ 2.4.5 globalErrorCallback</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-global-getglobalstate" aria-label="Links in this document to definition: getGlobalState()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-global-getglobalstate" aria-label="Permalink for definition: getGlobalState(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1241168519">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-global-getglobalstate-1" title="§ 2.4 MiniApp Global Application Lifecycle interface and callbacks">§ 2.4 MiniApp Global Application Lifecycle interface and callbacks</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-inputobject" aria-label="Links in this document to definition: InputObject">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-inputobject" aria-label="Permalink for definition: InputObject. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-inputobject-1" title="§ 2.4 MiniApp Global Application Lifecycle interface and callbacks">§ 2.4 MiniApp Global Application Lifecycle interface and callbacks</a> <a href="#ref-for-dom-inputobject-2" title="Reference 2">(2)</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-inputobject-inputquery" aria-label="Links in this document to definition: inputQuery">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-inputobject-inputquery" aria-label="Permalink for definition: inputQuery. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-2090966171">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-inputobject-inputquery-1" title="§ 2.5 InputObject interface">§ 2.5 InputObject interface</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-inputobject-pagepath" aria-label="Links in this document to definition: pagePath">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-inputobject-pagepath" aria-label="Permalink for definition: pagePath. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-2090966171">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-inputobject-pagepath-1" title="§ 2.5 InputObject interface">§ 2.5 InputObject interface</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-inputobject-referrerinfo" aria-label="Links in this document to definition: referrerInfo">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-inputobject-referrerinfo" aria-label="Permalink for definition: referrerInfo. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-2090966171">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-inputobject-referrerinfo-1" title="§ 2.5 InputObject interface">§ 2.5 InputObject interface</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-lifecycleerror" aria-label="Links in this document to definition: LifecycleError">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-lifecycleerror" aria-label="Permalink for definition: LifecycleError. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-lifecycleerror-1" title="§ 2.4 MiniApp Global Application Lifecycle interface and callbacks">§ 2.4 MiniApp Global Application Lifecycle interface and callbacks</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-lifecycleerror-errordescription" aria-label="Links in this document to definition: errorDescription">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-lifecycleerror-errordescription" aria-label="Permalink for definition: errorDescription. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1557930575">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-lifecycleerror-errordescription-1" title="§ 2.6 LifecycleError interface">§ 2.6 LifecycleError interface</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-page-lifecycle-events" aria-label="Links in this document to definition: page lifecycle events">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-page-lifecycle-events" aria-label="Permalink for definition: page lifecycle events. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-page-lifecycle-events-1" title="§ 1. Background">§ 1. Background</a> 
  </li><li>
    <a href="#ref-for-dfn-page-lifecycle-events-2" title="§ 3.2 MiniApp Page Lifecycle States">§ 3.2 MiniApp Page Lifecycle States</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-page-loading" aria-label="Links in this document to definition: page loading">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-page-loading" aria-label="Permalink for definition: page loading. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-page-loading-1" title="§ 3.1 MiniApp Page Lifecycle Events">§ 3.1 MiniApp Page Lifecycle Events</a> 
  </li><li>
    <a href="#ref-for-dfn-page-loading-2" title="§ 3.2 MiniApp Page Lifecycle States">§ 3.2 MiniApp Page Lifecycle States</a> <a href="#ref-for-dfn-page-loading-3" title="Reference 2">(2)</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-page-first-render-ready" aria-label="Links in this document to definition: page first render ready">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-page-first-render-ready" aria-label="Permalink for definition: page first render ready. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-page-first-render-ready-1" title="§ 3.1 MiniApp Page Lifecycle Events">§ 3.1 MiniApp Page Lifecycle Events</a> 
  </li><li>
    <a href="#ref-for-dfn-page-first-render-ready-2" title="§ 3.2 MiniApp Page Lifecycle States">§ 3.2 MiniApp Page Lifecycle States</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-page-running-in-foreground" aria-label="Links in this document to definition: page running in foreground">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-page-running-in-foreground" aria-label="Permalink for definition: page running in foreground. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-page-running-in-foreground-1" title="§ 3.1 MiniApp Page Lifecycle Events">§ 3.1 MiniApp Page Lifecycle Events</a> 
  </li><li>
    <a href="#ref-for-dfn-page-running-in-foreground-2" title="§ 3.2 MiniApp Page Lifecycle States">§ 3.2 MiniApp Page Lifecycle States</a> <a href="#ref-for-dfn-page-running-in-foreground-3" title="Reference 2">(2)</a> <a href="#ref-for-dfn-page-running-in-foreground-4" title="Reference 3">(3)</a> 
  </li><li>
    <a href="#ref-for-dfn-page-running-in-foreground-5" title="§ 3.4.4 pageShownCallback">§ 3.4.4 pageShownCallback</a> 
  </li><li>
    <a href="#ref-for-dfn-page-running-in-foreground-6" title="§ 3.4.5 pageHiddenCallback">§ 3.4.5 pageHiddenCallback</a> 
  </li><li>
    <a href="#ref-for-dfn-page-running-in-foreground-7" title="§ 4. Privacy and Security">§ 4. Privacy and Security</a> <a href="#ref-for-dfn-page-running-in-foreground-8" title="Reference 2">(2)</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-page-running-in-background" aria-label="Links in this document to definition: page running in background">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-page-running-in-background" aria-label="Permalink for definition: page running in background. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-page-running-in-background-1" title="§ 3.1 MiniApp Page Lifecycle Events">§ 3.1 MiniApp Page Lifecycle Events</a> 
  </li><li>
    <a href="#ref-for-dfn-page-running-in-background-2" title="§ 3.2 MiniApp Page Lifecycle States">§ 3.2 MiniApp Page Lifecycle States</a> <a href="#ref-for-dfn-page-running-in-background-3" title="Reference 2">(2)</a> <a href="#ref-for-dfn-page-running-in-background-4" title="Reference 3">(3)</a> 
  </li><li>
    <a href="#ref-for-dfn-page-running-in-background-5" title="§ 3.4.4 pageShownCallback">§ 3.4.4 pageShownCallback</a> 
  </li><li>
    <a href="#ref-for-dfn-page-running-in-background-6" title="§ 3.4.5 pageHiddenCallback">§ 3.4.5 pageHiddenCallback</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-page-unloading" aria-label="Links in this document to definition: page unloading">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-page-unloading" aria-label="Permalink for definition: page unloading. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-page-unloading-1" title="§ 3.1 MiniApp Page Lifecycle Events">§ 3.1 MiniApp Page Lifecycle Events</a> 
  </li><li>
    <a href="#ref-for-dfn-page-unloading-2" title="§ 3.2 MiniApp Page Lifecycle States">§ 3.2 MiniApp Page Lifecycle States</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-first-render" aria-label="Links in this document to definition: first render">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-first-render" aria-label="Permalink for definition: first render. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-first-render-1" title="§ 3.1 MiniApp Page Lifecycle Events">§ 3.1 MiniApp Page Lifecycle Events</a> <a href="#ref-for-dfn-first-render-2" title="Reference 2">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-first-render-3" title="§ 3.2 MiniApp Page Lifecycle States">§ 3.2 MiniApp Page Lifecycle States</a> 
  </li><li>
    <a href="#ref-for-dfn-first-render-4" title="§ 3.4.3 pageReadyCallback">§ 3.4.3 pageReadyCallback</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-page-lifecycle-states" aria-label="Links in this document to definition: page lifecycle states">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-page-lifecycle-states" aria-label="Permalink for definition: page lifecycle states. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-page-lifecycle-states-1" title="§ 1. Background">§ 1. Background</a> 
  </li><li>
    <a href="#ref-for-dfn-page-lifecycle-states-2" title="§ 3.3 PageState enum">§ 3.3 PageState enum</a> <a href="#ref-for-dfn-page-lifecycle-states-3" title="Reference 2">(2)</a> <a href="#ref-for-dfn-page-lifecycle-states-4" title="Reference 3">(3)</a> <a href="#ref-for-dfn-page-lifecycle-states-5" title="Reference 4">(4)</a> <a href="#ref-for-dfn-page-lifecycle-states-6" title="Reference 5">(5)</a> <a href="#ref-for-dfn-page-lifecycle-states-7" title="Reference 6">(6)</a> <a href="#ref-for-dfn-page-lifecycle-states-8" title="Reference 7">(7)</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-page-loaded" aria-label="Links in this document to definition: page loaded">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-page-loaded" aria-label="Permalink for definition: page loaded. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-page-loaded-1" title="§ 3.3 PageState enum">§ 3.3 PageState enum</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-page-ready" aria-label="Links in this document to definition: page ready">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-page-ready" aria-label="Permalink for definition: page ready. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-page-ready-1" title="§ 3.3 PageState enum">§ 3.3 PageState enum</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-page-shown" aria-label="Links in this document to definition: page shown">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-page-shown" aria-label="Permalink for definition: page shown. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-page-shown-1" title="§ 3.3 PageState enum">§ 3.3 PageState enum</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-page-hidden" aria-label="Links in this document to definition: page hidden">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-page-hidden" aria-label="Permalink for definition: page hidden. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-page-hidden-1" title="§ 3.3 PageState enum">§ 3.3 PageState enum</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-page-unloaded" aria-label="Links in this document to definition: page unloaded">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-page-unloaded" aria-label="Permalink for definition: page unloaded. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dfn-page-unloaded-1" title="§ 3.3 PageState enum">§ 3.3 PageState enum</a> 
  </li><li>
    <a href="#ref-for-dfn-page-unloaded-2" title="§ 4. Privacy and Security">§ 4. Privacy and Security</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pagestate" aria-label="Links in this document to definition: PageState">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pagestate" aria-label="Permalink for definition: PageState. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-927692399">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-pagestate-1" title="§ 3.3 PageState enum">§ 3.3 PageState enum</a> <a href="#ref-for-dom-pagestate-2" title="Reference 2">(2)</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pagestate-loaded" aria-label="Links in this document to definition: loaded">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pagestate-loaded" aria-label="Permalink for definition: loaded. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-927692399">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-pagestate-loaded-1" title="§ 3.3 PageState enum">§ 3.3 PageState enum</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pagestate-ready" aria-label="Links in this document to definition: ready">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pagestate-ready" aria-label="Permalink for definition: ready. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-927692399">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-pagestate-ready-1" title="§ 3.3 PageState enum">§ 3.3 PageState enum</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pagestate-shown" aria-label="Links in this document to definition: shown">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pagestate-shown" aria-label="Permalink for definition: shown. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-927692399">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-pagestate-shown-1" title="§ 3.3 PageState enum">§ 3.3 PageState enum</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pagestate-hidden" aria-label="Links in this document to definition: hidden">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pagestate-hidden" aria-label="Permalink for definition: hidden. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-927692399">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-pagestate-hidden-1" title="§ 3.3 PageState enum">§ 3.3 PageState enum</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pagestate-unloaded" aria-label="Links in this document to definition: unloaded">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pagestate-unloaded" aria-label="Permalink for definition: unloaded. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-927692399">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-pagestate-unloaded-1" title="§ 3.3 PageState enum">§ 3.3 PageState enum</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-page" aria-label="Links in this document to definition: Page">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-page" aria-label="Permalink for definition: Page. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pageloadedcallback" aria-label="Links in this document to definition: PageLoadedCallback">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pageloadedcallback" aria-label="Permalink for definition: PageLoadedCallback. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-pageloadedcallback-1" title="§ 3.4 MiniApp Page Lifecycle interface and callbacks">§ 3.4 MiniApp Page Lifecycle interface and callbacks</a> 
  </li><li>
    <a href="#ref-for-dom-pageloadedcallback-2" title="§ 3.4.2 pageLoadedCallback">§ 3.4.2 pageLoadedCallback</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pagereadycallback" aria-label="Links in this document to definition: PageReadyCallback">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pagereadycallback" aria-label="Permalink for definition: PageReadyCallback. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-pagereadycallback-1" title="§ 3.4 MiniApp Page Lifecycle interface and callbacks">§ 3.4 MiniApp Page Lifecycle interface and callbacks</a> 
  </li><li>
    <a href="#ref-for-dom-pagereadycallback-2" title="§ 3.4.3 pageReadyCallback">§ 3.4.3 pageReadyCallback</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pageshowncallback" aria-label="Links in this document to definition: PageShownCallback">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pageshowncallback" aria-label="Permalink for definition: PageShownCallback. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-pageshowncallback-1" title="§ 3.4 MiniApp Page Lifecycle interface and callbacks">§ 3.4 MiniApp Page Lifecycle interface and callbacks</a> 
  </li><li>
    <a href="#ref-for-dom-pageshowncallback-2" title="§ 3.4.4 pageShownCallback">§ 3.4.4 pageShownCallback</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pagehiddencallback" aria-label="Links in this document to definition: PageHiddenCallback">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pagehiddencallback" aria-label="Permalink for definition: PageHiddenCallback. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-pagehiddencallback-1" title="§ 3.4 MiniApp Page Lifecycle interface and callbacks">§ 3.4 MiniApp Page Lifecycle interface and callbacks</a> 
  </li><li>
    <a href="#ref-for-dom-pagehiddencallback-2" title="§ 3.4.5 pageHiddenCallback">§ 3.4.5 pageHiddenCallback</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pageunloadedcallback" aria-label="Links in this document to definition: PageUnloadedCallback">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pageunloadedcallback" aria-label="Permalink for definition: PageUnloadedCallback. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-pageunloadedcallback-1" title="§ 3.4 MiniApp Page Lifecycle interface and callbacks">§ 3.4 MiniApp Page Lifecycle interface and callbacks</a> 
  </li><li>
    <a href="#ref-for-dom-pageunloadedcallback-2" title="§ 3.4.6 pageUnloadedCallback">§ 3.4.6 pageUnloadedCallback</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-page-getpagestate" aria-label="Links in this document to definition: getPageState()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-page-getpagestate" aria-label="Permalink for definition: getPageState(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1794268897">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-page-getpagestate-1" title="§ 3.4 MiniApp Page Lifecycle interface and callbacks">§ 3.4 MiniApp Page Lifecycle interface and callbacks</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pageinputobject" aria-label="Links in this document to definition: PageInputObject">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pageinputobject" aria-label="Permalink for definition: PageInputObject. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-pageinputobject-1" title="§ 3.4 MiniApp Page Lifecycle interface and callbacks">§ 3.4 MiniApp Page Lifecycle interface and callbacks</a> 
  </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pageinputobject-pageinputquery" aria-label="Links in this document to definition: pageInputQuery">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pageinputobject-pageinputquery" aria-label="Permalink for definition: pageInputQuery. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1892177630">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
    <a href="#ref-for-dom-pageinputobject-pageinputquery-1" title="§ 3.5 PageInputObject interface">§ 3.5 PageInputObject interface</a> 
  </li>
  </ul>
    </div><script id="respec-dfn-panel">(() => {
// @ts-check
if (document.respec) {
  document.respec.ready.then(setupPanel);
} else {
  setupPanel();
}

function setupPanel() {
  const listener = panelListener();
  document.body.addEventListener("keydown", listener);
  document.body.addEventListener("click", listener);
}

function panelListener() {
  /** @type {HTMLElement} */
  let panel = null;
  return event => {
    const { target, type } = event;

    if (!(target instanceof HTMLElement)) return;

    // For keys, we only care about Enter key to activate the panel
    // otherwise it's activated via a click.
    if (type === "keydown" && event.key !== "Enter") return;

    const action = deriveAction(event);

    switch (action) {
      case "show": {
        hidePanel(panel);
        /** @type {HTMLElement} */
        const dfn = target.closest("dfn, .index-term");
        panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
        const coords = deriveCoordinates(event);
        displayPanel(dfn, panel, coords);
        break;
      }
      case "dock": {
        panel.style.left = null;
        panel.style.top = null;
        panel.classList.add("docked");
        break;
      }
      case "hide": {
        hidePanel(panel);
        panel = null;
        break;
      }
    }
  };
}

/**
 * @param {MouseEvent|KeyboardEvent} event
 */
function deriveCoordinates(event) {
  const target = /** @type HTMLElement */ (event.target);

  // We prevent synthetic AT clicks from putting
  // the dialog in a weird place. The AT events sometimes
  // lack coordinates, so they have clientX/Y = 0
  const rect = target.getBoundingClientRect();
  if (
    event instanceof MouseEvent &&
    event.clientX >= rect.left &&
    event.clientY >= rect.top
  ) {
    // The event probably happened inside the bounding rect...
    return { x: event.clientX, y: event.clientY };
  }

  // Offset to the middle of the element
  const x = rect.x + rect.width / 2;
  // Placed at the bottom of the element
  const y = rect.y + rect.height;
  return { x, y };
}

/**
 * @param {Event} event
 */
function deriveAction(event) {
  const target = /** @type {HTMLElement} */ (event.target);
  const hitALink = !!target.closest("a");
  if (target.closest("dfn:not([data-cite]), .index-term")) {
    return hitALink ? "none" : "show";
  }
  if (target.closest(".dfn-panel")) {
    if (hitALink) {
      return target.classList.contains("self-link") ? "hide" : "dock";
    }
    const panel = target.closest(".dfn-panel");
    return panel.classList.contains("docked") ? "hide" : "none";
  }
  if (document.querySelector(".dfn-panel:not([hidden])")) {
    return "hide";
  }
  return "none";
}

/**
 * @param {HTMLElement} dfn
 * @param {HTMLElement} panel
 * @param {{ x: number, y: number }} clickPosition
 */
function displayPanel(dfn, panel, { x, y }) {
  panel.hidden = false;
  // distance (px) between edge of panel and the pointing triangle (caret)
  const MARGIN = 20;

  const dfnRects = dfn.getClientRects();
  // Find the `top` offset when the `dfn` can be spread across multiple lines
  let closestTop = 0;
  let minDiff = Infinity;
  for (const rect of dfnRects) {
    const { top, bottom } = rect;
    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
    if (diffFromClickY < minDiff) {
      minDiff = diffFromClickY;
      closestTop = top;
    }
  }

  const top = window.scrollY + closestTop + dfnRects[0].height;
  const left = x - MARGIN;
  panel.style.left = `${left}px`;
  panel.style.top = `${top}px`;

  // Find if the panel is flowing out of the window
  const panelRect = panel.getBoundingClientRect();
  const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
  if (panelRect.right > SCREEN_WIDTH) {
    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
    const newCaretOffset = left - newLeft;
    panel.style.left = `${newLeft}px`;
    /** @type {HTMLElement} */
    const caret = panel.querySelector(".caret");
    caret.style.left = `${newCaretOffset}px`;
  }

  // As it's a dialog, we trap focus.
  // TODO: when <dialog> becomes a implemented, we should really
  // use that.
  trapFocus(panel, dfn);
}

/**
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function trapFocus(panel, dfn) {
  /** @type NodeListOf<HTMLAnchorElement> elements */
  const anchors = panel.querySelectorAll("a[href]");
  // No need to trap focus
  if (!anchors.length) return;

  // Move focus to first anchor element
  const first = anchors.item(0);
  first.focus();

  const trapListener = createTrapListener(anchors, panel, dfn);
  panel.addEventListener("keydown", trapListener);

  // Hiding the panel releases the trap
  const mo = new MutationObserver(records => {
    const [record] = records;
    const target = /** @type HTMLElement */ (record.target);
    if (target.hidden) {
      panel.removeEventListener("keydown", trapListener);
      mo.disconnect();
    }
  });
  mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
}

/**
 *
 * @param {NodeListOf<HTMLAnchorElement>} anchors
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function createTrapListener(anchors, panel, dfn) {
  const lastIndex = anchors.length - 1;
  let currentIndex = 0;
  return event => {
    switch (event.key) {
      // Hitting "Tab" traps us in a nice loop around elements.
      case "Tab": {
        event.preventDefault();
        currentIndex += event.shiftKey ? -1 : +1;
        if (currentIndex < 0) {
          currentIndex = lastIndex;
        } else if (currentIndex > lastIndex) {
          currentIndex = 0;
        }
        anchors.item(currentIndex).focus();
        break;
      }

      // Hitting "Enter" on an anchor releases the trap.
      case "Enter":
        hidePanel(panel);
        break;

      // Hitting "Escape" returns focus to dfn.
      case "Escape":
        hidePanel(panel);
        dfn.focus();
        return;
    }
  };
}

/** @param {HTMLElement} panel */
function hidePanel(panel) {
  if (!panel) return;
  panel.hidden = true;
  panel.classList.remove("docked");
}
})()</script><script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script></body></html>