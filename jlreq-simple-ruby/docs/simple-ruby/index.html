<!DOCTYPE html>
<html lang=en>
  <head>
    <meta charset='utf-8'>
    <title>Rules for Simple Placement of Ruby ルビの簡便な配置ルール</title>

    <link rel="stylesheet" href="../../local.css" />
    <script src='https://www.w3.org/Tools/respec/respec-w3c-common' class='remove'></script>
    <script defer src="../../script.js"></script>

    <script class='remove'>
      var respecConfig = {
        specStatus: "ED",
        editors: [{
          name: "Florian Rivoal",
	        company: "Invited Expert",
          url: "https://florian.rivoal.net",
	        w3cid: "43241",
        }],
        authors: [{
            name: "<span lang='ja'>小林 敏</span> (Toshi Kobayashi)",
          }],
        github: "w3c/jlreq",
	      edDraftURI: "https://w3c.github.io/jlreq/docs/simple-ruby/",
        prevED: "https://florian.rivoal.net/ruby/",
        shortName: "simple-ruby",
        alternateFormats: [{
            uri: "ruby-rules-ja.pdf",
            label: "Original Japanese (PDF)",
        }],
        localBiblio: {
          JIS4051: {
            title: "Formatting rules for Japanese documents (&#12302;&#26085;&#26412;&#35486;&#25991;&#26360;&#12398;&#32068;&#29256;&#26041;&#27861;&#12303;)",
            publisher: "Japanese Standards Association",
            date: "2004",
            id: "JIS X 4051:2004",
          },
        },
        noRecTrack: true,
        wg: "Internationalization Working Group",
        wgURI: "https://www.w3.org/International/core/",
        wgPatentURI:  "https://www.w3.org/2004/01/pp-impl/32113/status",
      };
    </script>
    <style>
      .note figure img {
        background: white;
        padding: 0.5em;
      }
    </style>
  </head>
<body onload="setFrontMatterIds(); /*addLangAttrs();*/ initialiseLang()">
<h1 class="title p-name" id="title">Rules for Simple Placement of Ruby<br/><span lang="ja">ルビの簡便な配置ルール</span></h1>

<section id='abstract'>
  <p its-locale-filter-list="en" lang="en" class="translateme">A simple set of rules for placement of Ruby text in Japanese typography.</p>
</section>
<section id='sotd'>
  <p its-locale-filter-list="en" lang="en" class="translateme">
  This document was initially written in Japanese
  and translated to English
  by the <a href="https://www.aplab.jp/jwt">Japanese Writing Technology</a> Working Group
  of the <a href="https://www.kri.sfc.keio.ac.jp/en/lab/aplab.html">Advanced Publishing Laboratory</a> of Keio University.
  </p>
  <p its-locale-filter-list="en" lang="en" class="translateme">
  It represents the subjective view of its authors and contributors
  as to one possible approach to address the problem,
  and does not claim to be the only possible solution.
  It is submitted to present a non-Japanese speaking audience
  with this particular approach,
  and to encourage discussion of this topic.
  </p>
  <p its-locale-filter-list="en" lang="en" class="translateme">The original Japanese version is <a href="https://florian.rivoal.net/ruby/ruby-rules-ja.pdf">available in PDF format</a>.</p>

  <p id="langSwitch">
    <button onclick="switchLang('ja')">日本語</button>
    <button onclick="switchLang('en')">English</button>
    <button onclick="switchLang('all')">All</button>
  </p>

</section>

<section class=informative>
<h2 id=intro>
    <span its-locale-filter-list="en" lang="en">Introduction</span>
    <span its-locale-filter-list="ja" lang="ja">はじめに</span>
</h2>

<section>
<h3 id="the-difficulties-of-ruby-processing">
    <span its-locale-filter-list="en" lang="en">The Difficulties of Ruby Processing</span>
    <span its-locale-filter-list="ja" lang="ja">ルビ処理のむつかしさ</span>
</h3>

<p its-locale-filter-list="en" lang="en">When performing ruby layout,
the following factors need to be considered
in order to decide on the position:</p>
<p its-locale-filter-list="en" lang="en">ルビの組版処理は，次のような事項を考慮して，その配置位置を決める必要がある．</p>

<ol>
  <li>
      <p its-locale-filter-list="en" lang="en">How to handle the correspondence between the base characters and the ruby</p>
      <p its-locale-filter-list="ja" lang="ja">親文字とルビの対応をどう処理すればよいのか</p>
      </li>
  <li>
      <p its-locale-filter-list="en" lang="en">What to do when the string of base characters is longer than the ruby string</p>
      <p its-locale-filter-list="ja" lang="ja">親文字の文字列の全長に比べ，ルビ文字の文字列の全長が短い場合，どう処理すればよいのか</p>
  </li>
  <li>
      <p its-locale-filter-list="en" lang="en" class="checkme">What to do when the string of base characters is shorter than the ruby string</p>
      <p its-locale-filter-list="ja" lang="ja">親文字の文字列の全長に比べ，ルビ文字の文字列の全長が長い場合，どう処理すればよいのか，親文字の文字列からルビ文字の文字列がはみ出してよいのか</p>
    </li>
  <li>
    <p its-locale-filter-list="en" lang="en">When the ruby string protrudes from the base character string,
    whether it can be allowed to be laid over the characters preceding or following,
    and whether this affects the position of the base characters</p>
    <p its-locale-filter-list="ja" lang="ja">親文字の文字列からルビ文字の文字列がはみ出した場合，前後に配置する文字や約物に掛かってよいのか，また，このことは，親文字とルビとの配置位置に影響するのか</p>
    <aside class=note title="Protrusion of ruby from base characters"  its-locale-filter-list="en" lang="en">
      In movable type typesetting,
      ruby characters protruding from their base characters
      may not hang over neighboring kanji,
      but often were allowed to hang over neighboring kana.
      However, when the ruby is katakana,
      some publishers would set it so that
      it would not hang over the kana neighboring the base character.
      Also, when the characters around the base characters
      were kanji on one side and kana on the other side,
      for the sake of balance
      the ruby would sometimes be set so as to hang
      neither over the kanji nor over the kana
      (which would therefore both be spaced away from the base character).
    </aside>
    <aside class=note title="親文字からのルビのはみ出し"  its-locale-filter-list="ja" lang="ja">
        活字組版では，一般に親文字からはみ出したルビは，漢字には掛けないが，仮名には掛けてよいとする場合が多かった．しかし，ルビが片仮名の場合は，親文字の前後の仮名にも掛けないという考え方をする出版社もあった．また，親文字の前後の一方が漢字で，他方が仮名の場合，漢字には，はみ出したルビを掛けないで字間を空けるが，仮名の方もバランスをとって，はみ出したルビを掛けないで字間を空ける処理をしている例もあった．
    </aside>
  </li>
  <li>
      <p its-locale-filter-list="en" lang="en">When the ruby string protrudes from the base character string,
    and the base character string is at the start or the end of the line,
    whether the base character string or the ruby string should be aligned with the line edge</p>
    <p its-locale-filter-list="ja" lang="ja">親文字の文字列からルビ文字の文字列がはみ出した場合において，行の先頭又は末尾に配置するときは，親文字の文字列の先頭又は末尾を行の先頭又は末尾にそろえるのか，それともルビ文字の文字列の先頭又は末尾を行の先頭又は末尾にそろえるのか</p>
  </li>
  <li>
      <p its-locale-filter-list="en" lang="en">When there are multiple base characters,
    whether there can be line wrap opportunity between them</p>
    <p its-locale-filter-list="ja" lang="ja">親文字が複数の場合，2 行にわたる分割をしてよいのか</p>
    <aside class="note checkme" title="Wrap opportunities" its-locale-filter-list="en" lang="en">
      In computer-based typesetting,
      rather than always suppressing line wrap opportunities,
      they would be allowed in cases like compound words.
      This is because it may otherwise triggers very large
      spacing adjustments during justification.
    </aside>
    <aside class=note title="2 行にわたる分割" its-locale-filter-list="ja" lang="ja">
        コンピュータ組版では，複数の親文字に対し，ルビを平均に配置するグループルビの場合，分割禁止とする．しかし，活字組版では，必ずしも分割禁止としないで，複合語などでは，分割していた．分割しない処理は，行の調整処理で極端な調整を必要とする場合もあったからである．
    </aside>
  </li>
</ol>

<p its-locale-filter-list="en" lang="en">In movable type typography,
such matters were resolved based generic principles,
and could always be corrected during the proofreading phase.
Essentially, each case was adjusted individually in a flexible manner.</p>
<p its-locale-filter-list="ja" lang="ja">活字組版では，こうした場合，原則的な考え方に従って処理し，問題があれば校正段階で修正の赤字が入り，それに従って直していた．いってみれば，個別箇所で臨機応変の工夫をして配置位置を決めていた．</p>

<p its-locale-filter-list="en" lang="en">In computer-based typesetting,
the layout needs to be more or less determined based on predetermined rules,
but it remained necessary to adjust the results in certain cases,
for example by changing the association between base characters
and the ruby string,
or by switching to a different placement policy.</p>
<p its-locale-filter-list="ja" lang="ja">コンピュータ組版では，ある程度は，配置方針を決め，一定のルールに従って配置処理をしていたが，個別箇所で，親文字とルビ文字の対応を変える，あるいは配置処理方針を変えるなどの工夫も必要とした．</p>
</section>

<section>
<h3 id="web-ruby-placement">
  <span its-locale-filter-list="en" lang="en">Web Ruby placement</span>
  <span its-locale-filter-list="ja" lang="ja">Web での配置処理</span>
</h3>

<p its-locale-filter-list="en" lang="en">When thinking about computing placement for web content,
it is not practical to decide on the positioning
case by case as was done in movable type typography.
It is therefore necessary to decide upon comprehensive rules
that provide solutions to all the problems listed above,
so that placement may be determined fully automatically.
Considering all the possibilities that existed in movable type typesetting,
the system to be designed needs to be very complex.</p>
<p its-locale-filter-list="ja" lang="ja">Web での配置処理を考えた場合，活字組版のように個別箇所で配置位置を工夫する処理は避けるのが望ましい．となると，上記の問題をすべて解決できる配置処理方針を決め，処理系に実装していく必要がある．活字組版で理想とされていた処理方法をカバーするとなると，かなり複雑な処理方針を考える必要がある．</p>

<p its-locale-filter-list="en" lang="en">However, when considering the ideal positioning of ruby,
it seems inevitable that exceptions will occur, causing issues.</p>
<p its-locale-filter-list="ja" lang="ja">しかし，ある程度理想的な配置処理を考えたとしても，ルビ処理では，どうしても例外事項が発生し，問題がでる可能性がある．</p>

<p its-locale-filter-list="en" lang="en">In such cases, rather than ideal positioning,
we must at least make sure that the positioning causes no misunderstanding;
there are also practical limits to how complex the system can be
in order to be practically implementable.</p>
<p its-locale-filter-list="ja" lang="ja">そこで，理想ではないが，誤読はされない，といった範囲で，例外のあまりでない，また，機械的に処理できる簡便な配置処理方針を考える必要があるように思われる．</p>

<p its-locale-filter-list="en" lang="en">The following is a proposal for a simple processing system. The target audience is implementers and specification writers.
Note that the terminology is based on that defined in
<a href="https://www.w3.org/TR/jlreq/"><abbr title="Requirements for Japanese Text Layout">JLReq</abbr></a> [[JLREQ]].</p>
<p its-locale-filter-list="ja" lang="ja">以下は，こうした簡便な配置処理方法の一案である．なお，用語は <a href="https://www.w3.org/TR/jlreq/"><abbr title="Requirements for Japanese Text Layout">JLReq</abbr></a>（⽇本語組版処理の要件，Requirements for Japanese Text Layout）による． [[JLREQ]]</p>
</section>
</section>

<section class=informative>
<h2 id="matters-considered-by-the-simple-placement-rules">
    <span its-locale-filter-list="en" lang="en">Matters considered by the simple placement rules</span>
    <span its-locale-filter-list="ja" lang="ja">簡便な配置ルールで考慮した事項</span>
</h2>

<section>
<h3 id="matters-considered-by-the-placement-rules">
    <span its-locale-filter-list="en" lang="en">Matters considered by the placement rules</span>
    <span its-locale-filter-list="ja" lang="ja">配置ルールで考慮した事項</span>
</h3>

<p its-locale-filter-list="en" lang="en">Here are the fundamental assumptions underlying the simple placement rules.</p>
<p its-locale-filter-list="ja" lang="ja">簡便な配置ルールを考えるにあたっては，次のような事項を考慮し，また前提とした．</p>

<ol>
  <li>
      <p its-locale-filter-list="en" lang="en">Ruby is used to display the reading or the meaning of the base characters.
    I therefore consider avoiding misreadings as the number one priority.</p>
    <p its-locale-filter-list="ja" lang="ja">ルビは，親文字の読み方又は意味を示すものである．そこで，誤読されないことを第一とした．</p>
    <aside class=note title="Ruby as notes" its-locale-filter-list="en" lang="en">
      Notes are sometimes placed between lines
      similarly to how ruby is laid out
      (inter-linear notes).
      The processing of this arrangement is not covered in this document.
    </aside>
    <aside class=note title="注釈としてのルビ" its-locale-filter-list="ja" lang="ja">
        行間にルビと同じ配置位置に注釈を配置する方法もある（行間注）．この配置処理は，ここでは適用範囲としない．
    </aside>
  </li>
  <li>
    <p its-locale-filter-list="en" lang="en">I have devised a method that attempts to reduce exceptions as much as possible.
    Therefore, there is no requirement for complex processing.
    </p>
    <p its-locale-filter-list="ja" lang="ja">できるだけ例外のでない配置処理を考えた．したがって，配置処理でも複雑な処理は要求していない．</p>
  </li>
  <li>
    <p its-locale-filter-list="en" lang="en">The method is agnostic to horizontal vs vertical writing,
    and will use the same logic in either case.</p>
    <p its-locale-filter-list="ja" lang="ja">縦組と横組とで配置処理法を変えることなく，共通の処理ができる方法とした．</p>
  </li>
  <li>
      <p its-locale-filter-list="en" lang="en">The method places the ruby string relative to the base character string
    the same way when they occur in the middle, start, or end of the line.
    Moreover, this method does not change the relative position
    of the ruby string to the base character string
    depending on preceding or subsequent characters.
    In other words, this method calculates a position
    for the ruby relative to the base string
    that does not change depending on context.</p>
    <p its-locale-filter-list="ja" lang="ja">親文字とルビの配置位置は，行中にある場合でも，行頭又は行末にある場合でも同じ配置位置とした．また，親文字の前後に配置する文字クラスにより親文字とルビの配置位置を変えることはしない方法とした．つまり，ルビの配置位置は，ルビの種類と親文字とルビの字数などにより配置位置を決めれば，その配置位置は，その他の条件で変化させない方法とした．</p>
  </li>
  <li>
    <p its-locale-filter-list="en" lang="en">Generally speaking, the processing method is based on JIS X 4051 [[JIS4051]]
    (Formatting rules for Japanese documents).
    However, in some cases, optional steps are used.</p>
    <p its-locale-filter-list="ja" lang="ja">処理法は，原則として JIS X 4051（日本語文書の組版方法）で規定している方法によった．[[JIS4051]] ただし，処理系定義として採用できる処理方法（オプション）を採用した場合がある．</p>
  </li>
  <li>
      <p its-locale-filter-list="en" lang="en">The ruby font size is set to half of the base character’s size as a default.
    However, the method supports using different sizes than 1/2.</p>
    <p its-locale-filter-list="ja" lang="ja">ルビの文字サイズは，親文字の文字サイズの 1/2 を初期値（デフォルト値）として採用した．ただし，ルビの文字サイズが親文字の文字サイズの 1/2 以外であっても採用できる配置方法とした．</p>
    <aside class=note title="Reference size" its-locale-filter-list="en" lang="en">
      Because the size of ruby characters used in JIS X 4051 [[JIS4051]] set to 1/2
      there are many examples that use the size of the ruby character as the reference.
      However, since ruby is not restricted to 1/2,
      this document uses the size the base character as the reference.
    </aside>
    <aside class=note title="サイズの基準" its-locale-filter-list="ja" lang="ja">
      JIS X 4051 [[JIS4051]] では，ルビの文字サイズを親文字の 1/2 としているので，サイズの基準をルビ文字のサイズとしている例が多い．しかし，ここでは，ルビ文字のサイズは 1/2 と限定しないので，親文字のサイズを基準として記述する．
    </aside>
    <aside class=note title="Size of ruby characters"  its-locale-filter-list="en" lang="en">
      In movable type typesetting,
      when ruby characters of size 3.5 points were not available,
      based characters of 7 points where sometimes paired
      with ruby characters of 4 points.
      Also, ruby associated with large base characters,
      such as those in titles,
      are sometimes smaller than 1/2.
    </aside>
    <aside class=note title="ルビの文字サイズ" its-locale-filter-list="ja" lang="ja">
      <p>活字組版では，3.5 ポイントのルビを準備していない場合もあった．そこで，7 ポイントの親文字にルビを付ける場合，4 ポイントのルビ文字を使用していた例もある．</p>
      <p>また，見出しなど，親文字が大きな文字の場合は，1/2 以下にしていた例もある．</p>
    </aside>
  </li>
  <li>
    <p its-locale-filter-list="en" lang="en">While there are cases of ruby on both sides of the base string exist,
    the method defined here only handles ruby on one side.
    Handling both sides is left as a future exercise.</p>
    <p its-locale-filter-list="ja" lang="ja">ルビを親文字の両側に配置する例もあるが，ここでは，片側に配置する場合に限定した．両側に配置する処理は，今後の課題とした．</p>
  </li>
</ol>
</section>

<section>
<h3 id="types-of-ruby">
    <span its-locale-filter-list="en" lang="en">Types of ruby</span>
    <span its-locale-filter-list="ja" lang="ja">ルビの種類</span>
</h3>

<p its-locale-filter-list="en" lang="en">Ruby may be divided into the following 3 different types,
based on the relationship between the ruby and the base characters
(see <a href="https://www.w3.org/TR/jlreq/#usage_of_ruby">JLReq “3.3.1 Usage of Ruby”</a> [[JLREQ]]).</p>
<p its-locale-filter-list="ja" lang="ja">ルビの種類は，親文字とルビとの対応関係から，次の3つとする（<a href="https://www.w3.org/TR/jlreq/#usage_of_ruby">JLReq，“3.3.1 ルビの使⽤”</a>参照 [[JLREQ]]）．</p>

<ol>
  <li>
      <p its-locale-filter-list="en" lang="en">Mono-ruby</p>
      <p its-locale-filter-list="ja" lang="ja">モノルビ</p>
  </li>
  <li>
      <p its-locale-filter-list="en" lang="en">Jukugo-ruby</p>
      <p its-locale-filter-list="ja" lang="ja">熟語ルビ</p>
  </li>
  <li>
      <p its-locale-filter-list="en" lang="en">Group-ruby</p>
      <p its-locale-filter-list="ja" lang="ja">グループルビ</p>
  </li>
</ol>

<figure id=ruby-types>
  <img its-locale-filter-list="en" src="img/fig1.svg" />
  <img its-locale-filter-list="ja" src="img_ja/fig1.svg" />
  <figcaption>
      <span its-locale-filter-list="en" lang="en">Types of ruby</span>
      <span its-locale-filter-list="ja" lang="ja">ルビの種類</span>
  </figcaption>
</figure>

<p its-locale-filter-list="en" lang="en">Which one to use depends on the relationship
between the ruby and the base characters.
Mono-ruby is used to connect ruby to a single base character,
Jukugo-ruby is used when multiple base characters each have a corresponding ruby
and at the same time the whole group needs to be processed together,
and group-ruby is used when ruby is attached to a group of base characters together (see <a href="#ruby-types"></a>).
Each is used when specified.</p>
<p its-locale-filter-list="ja" lang="ja">どのルビとするかは，親文字とルビとの対応関係による．モノルビは 1 文字の親文字とルビ文字が対応し，熟語ルビは，複数の親文字のそれぞれの 1 文字とルビ文字が対応し，かつ複数の親文字とルビとを一体として扱い，グループルビでは，複数の親文字の全体に対しルビが対応する（[[[#ruby-types]]]）．いずれのルビかは指定による．</p>
</section>
</section>

<section>
<h2 id="rules-for-simple-placement-of-ruby">
  <span its-locale-filter-list="en" lang="en">Rules for Simple Placement of Ruby</span>
  <span its-locale-filter-list="ja" lang="ja">ルビの簡便な配置ルール</span>
</h2>

<section>
<h3 id="ruby-character-size-and-character-placement">
    <span its-locale-filter-list="en" lang="en">Ruby character size and character placement</span>
    <span its-locale-filter-list="ja" lang="ja">ルビの文字サイズと配置位置</span>
</h3>

<p its-locale-filter-list="en" lang="en">The size of the ruby characters
and their placement in the inline direction relative to the base characters is as follows:</p>
<p its-locale-filter-list="ja" lang="ja">ルビの文字サイズと親文字に対する行送り方向の配置位置は，次による．</p>

<ol>
  <li>
      <p its-locale-filter-list="en" lang="en">The size of the ruby is by default set to
      half of the size of the base characters.</p>
      <p its-locale-filter-list="ja" lang="ja">ルビの文字サイズは，親文字の文字サイズの 1/2 を初期値（デフォルト値）とする．</p>
  </li>
  <li>
    <p its-locale-filter-list="en" lang="en">In vertical text, ruby is placed to the right of the base characters,
    and the character frame of the ruby is placed flush
    against the character frame of the base characters.</p>
    <p its-locale-filter-list="ja" lang="ja">縦組のルビは，親文字の右側とし，親文字の文字の外枠とルビ文字の外枠を接して配置する．</p>
    <figure>
      <img its-locale-filter-list="en" src="img/fig2.svg" />
      <img its-locale-filter-list="ja" src="img_ja/fig2.svg" />
      <figcaption>
          <span its-locale-filter-list="en" lang="en">Example of vertical ruby</span>
          <span its-locale-filter-list="ja" lang="ja">縦組のルビの例</span>
      </figcaption>
    </figure>
  </li>
  <li>
      <p its-locale-filter-list="en" lang="en">In horizontal text, ruby is placed to the top of the base characters,
    and the character frame of the ruby is placed flush
    against the character frame of the base characters.</p>
    <p its-locale-filter-list="ja" lang="ja">横組のルビは，親文字の上側とし，親文字の文字の外枠とルビ文字の外枠を接して配置する．</p>
    <figure>
      <img its-locale-filter-list="en" src="img/fig3.svg" />
      <img its-locale-filter-list="ja" src="img_ja/fig3.svg" />
      <figcaption>
          <span its-locale-filter-list="en" lang="en">Example of horizontal ruby</span>
          <span its-locale-filter-list="ja" lang="ja">横組のルビの例</span>
          </figcaption>
    </figure>
  </li>
</ol>

<p its-locale-filter-list="en" lang="en">The following sections describe in detail the placement of
mono-ruby,
jukugo-ruby,
and group-ruby.
However, since jukugo-ruby is more complex,
it is explained last.</p>
<p its-locale-filter-list="ja" lang="ja">以下では，モノルビ，熟語ルビ，グループルビの配置処理を解説するが，熟語ルビは，処理がやや複雑なので，モノルビ，グループルビ，熟語ルビの順序で解説する．</p>
</section>

<section>
<h3 id="placement-of-mono-ruby">
    <span its-locale-filter-list="en" lang="en">Placement of mono-ruby</span>
    <span its-locale-filter-list="ja" lang="ja">モノルビの配置処理</span>
</h3>

<p its-locale-filter-list="en" lang="en">Mono-ruby is placed as follows:</p>
<p its-locale-filter-list="ja" lang="ja">モノルビの配置処理は，次による．</p>

<ol>
  <li>
    <p its-locale-filter-list="en" lang="en">When the ruby is made of two or more characters,
    each character in the ruby string is placed
    immediately next to its neighboring character,
    without any inter-letter spacing.
    Furthermore, when the ruby is composed of characters such as
    <a href="https://www.w3.org/TR/jlreq/#cl-24">Grouped numerals (cl-24)</a>,
    <a href="https://www.w3.org/TR/jlreq/#cl-25">Unit symbols (cl-25)</a>,
    <a href="https://www.w3.org/TR/jlreq/#cl-26">Western word space (cl-26)</a>,
    or <a href="https://www.w3.org/TR/jlreq/#cl-27">Western characters (cl-27)</a> [[JLREQ]]
    which have their own individual width,
    they are placed based on each character’s metrics.</p>
    <p its-locale-filter-list="ja" lang="ja">ルビの字数が 2 字以上の場合は，ルビ文字の文字列の字間はベタ組とする．なお，ルビ⽂字が<a href="https://www.w3.org/TR/jlreq/#cl-24">連数字中の⽂字（cl-24）</a>，<a href="https://www.w3.org/TR/jlreq/#cl-25">単位記号中の⽂字（cl-25）</a>，<a href="https://www.w3.org/TR/jlreq/#cl-26">欧文用間隔（cl-26）</a>，<a href="https://www.w3.org/TR/jlreq/#cl-27">欧⽂⽤⽂字（cl-27）</a>のように固有の字幅を持つ⽂字の場合には，それぞれの⽂字の固有の字幅に応じて配置する． [[JLREQ]]</p>
    <figure>
      <img its-locale-filter-list="en" src="img/fig4.svg" />
      <img its-locale-filter-list="ja" src="img_ja/fig4.svg" />
      <figcaption>
          <span its-locale-filter-list="en" lang="en">Example mono-ruby with western characters</span>
          <span its-locale-filter-list="ja" lang="ja">欧字のモノルビの例</span>
      </figcaption>
    </figure>

  </li>
  <li>
      <p its-locale-filter-list="en" lang="en">The center of the ruby string and of the base character string
    are aligned in the inline direction.
    (see <a href="#mono-ex-1"></a>).</p>
    <p its-locale-filter-list="ja" lang="ja">ルビ文字の文字列と親文字の字詰め方向の中心をそろえて配置する（[[[#mono-ex-1]]]）．</p>
  </li>
  <li>
    <p its-locale-filter-list="en" lang="en">Since the base character and its associated ruby form a single unit
    there is no line wrapping opportunity inside a mono-ruby.</p>
    <p its-locale-filter-list="ja" lang="ja">モノルビの場合，親⽂字とそれに付くルビ⽂字の⽂字列は，⼀体として扱い，2 ⾏に分割してはならない．</p>
  </li>
  <li>
    <p its-locale-filter-list="en" lang="en" class="checkme">When the ruby string is longer than the base character string,
    the part of the ruby string that extends beyond the base characters
    must not hang over the characters preceding or following,
    if they are
    <a href="https://www.w3.org/TR/jlreq/#cl-19">ideographic characters (cl-19)</a>,
    <a href="https://www.w3.org/TR/jlreq/#cl-15">Hiragana (cl-15)</a>,
    <a href="https://www.w3.org/TR/jlreq/#cl-26">Katakana (cl-16)</a>,
    etc [[JLREQ]].
    Space is introduced accordingly
    between these preceding or following characters and the base characters.</p>
    <p its-locale-filter-list="ja" lang="ja">親文字よりルビ文字の文字列の全長が長い場合，親文字からはみ出したルビ文字を親文字の前⼜は後ろに配置する<a href="https://www.w3.org/TR/jlreq/#cl-19">漢字等（cl-19）</a>，<a href="https://www.w3.org/TR/jlreq/#cl-15">平仮名（cl-15）</a>，<a href="https://www.w3.org/TR/jlreq/#cl-26">⽚仮名（cl-16）</a>などに掛けてはならない（[[[#mono-ex-1]]]）．</p>
    <aside class=note title="Protruding over surrounding characters" its-locale-filter-list="en" lang="en">
      The main placement method defined in JIS X 4051 [[JIS4051]]
      allows some amount of overhang over the preceding and following base characters,
      but recognizes the method defined here as an allowed variant.
    </aside>
    <aside class=note title="はみ出したルビと前後の文字の関係" its-locale-filter-list="ja" lang="ja">
        JIS X 4051 [[JIS4051]] では，親文字群（親文字及びそれに付随するルビ）と，その前後に配置する文字との関係について，ルビ文字を最大でルビ文字の文字サイズまで，親文字群の前後に配置する仮名にかけてよいという規定とともに，“処理系定義として，ルビ文字を前又は後ろの文字にかけずに配置してもよい”との規定も書かれている．
    </aside>
    <figure id=mono-ex-1>
      <img its-locale-filter-list="en" src="img/fig5.svg" />
      <img its-locale-filter-list="ja" src="img_ja/fig5.svg" />
      <figcaption>
          <span its-locale-filter-list="en" lang="en">Example 1 of mono-ruby protruding</span>
          <span its-locale-filter-list="ja" lang="ja">はみ出しのあるモノルビの例1</span>
      </figcaption>
    </figure>
    <p its-locale-filter-list="en" lang="en">
    However, in the following cases,
    the ruby characters do hang over the preceding or following characters
    (see <a href="#mono-ex-2"></a>).
    </p>
    <p its-locale-filter-list="ja" lang="ja">
        ただし，次の場合に限り，ルビを掛ける（[[[#mono-ex-2]]]）．
    </p>

    <ul>
      <li>
        <p its-locale-filter-list="en" lang="en">
        If the character preceding the base character is one of:
        <a href="https://www.w3.org/TR/jlreq/#cl-02">Closing brackets (cl-02)</a>,
        <a href="https://www.w3.org/TR/jlreq/#cl-06">Full stops (cl-06)</a>,
        <a href="https://www.w3.org/TR/jlreq/#cl-07">Commas (cl-07)</a>,
        <a href="https://www.w3.org/TR/jlreq/#cl-14">Full-width ideographic space (cl-14)</a>,
        or <a href="https://www.w3.org/TR/jlreq/#cl-05">Middle dots (cl-05)</a> [[JLREQ]],
        then the ruby must hang over
        the blank portion at the end the character.
        (This blank portion is usually half the character’s width,
        except in the case of <a href="https://www.w3.org/TR/jlreq/#cl-05">Middle dots (cl-05)</a> [[JLREQ]]
        where it is a fourth of the character width).
        However, if this blank part has been compressed
        due to justification or similar processing of the line,
        then the ruby may only hang over the resulting
        compressed blank space
        (e.g. if it was reduced from half to a quarter em,
        hang at most a quarter em).</p>
        <p its-locale-filter-list="ja" lang="ja">
          親文字の前に配置する<a href="https://www.w3.org/TR/jlreq/#cl-02">終わり括弧類（cl-02）</a>，<a href="https://www.w3.org/TR/jlreq/#cl-06">句点類（cl-06）</a>，<a href="https://www.w3.org/TR/jlreq/#cl-07">読点類（cl-07）</a>，<a href="https://www.w3.org/TR/jlreq/#cl-14">和字間隔（cl-14）</a>⼜は<a href="https://www.w3.org/TR/jlreq/#cl-05">中点類（cl-05）</a>の後ろのアキ（このアキは，<a href="https://www.w3.org/TR/jlreq/#cl-05">中点類（cl-05）</a>以外，通常は親文字の二分（<a href="https://www.w3.org/TR/jlreq/#cl-05">中点類（cl-05）</a>は四分），ただし，行の調整処理で⼆分アキや四分アキが詰められている場合は，調整で詰められた空き量までとする，例えば，四分アキとなっていれば，四分まで）
        </p>
      </li>
      <li>
        <p its-locale-filter-list="en" lang="en">
        If the character following the base character is one of:
        <a href="https://www.w3.org/TR/jlreq/#cl-01">Opening brackets (cl-01)</a> or
        <a href="https://www.w3.org/TR/jlreq/#cl-14">Full-width ideographic space (cl-14)</a>,
        <a href="https://www.w3.org/TR/jlreq/#cl-05">Middle dots (cl-05)</a> [[JLREQ]],
        then the ruby must hang over
        the blank portion at the start the character.
        (This blank portion is usually
        half the character’s width for <a href="https://www.w3.org/TR/jlreq/#cl-01">Opening brackets (cl-01)</a>,
        or a quarter of the character’s width for <a href="https://www.w3.org/TR/jlreq/#cl-05">Middle dots (cl-05)</a> [[JLREQ]])
        However, if this blank part has been compressed
        due to justification or similar processing of the line,
        then the ruby may only hang over the resulting
        compressed blank space
        (e.g. if it was reduced from half to a quarter em,
        hang at most a quarter em).
        </p>
        <p its-locale-filter-list="ja" lang="ja">
            親文字の後ろに配置する<a href="https://www.w3.org/TR/jlreq/#cl-01">始め括弧類（cl-01）</a>，<a href="https://www.w3.org/TR/jlreq/#cl-14">和字間隔（cl-14）</a>⼜は<a href="https://www.w3.org/TR/jlreq/#cl-05">中点類（cl-05）</a>の前のアキ（<a href="https://www.w3.org/TR/jlreq/#cl-01">始め括弧類（cl-01）</a>は通常は親文字の二分，<a href="https://www.w3.org/TR/jlreq/#cl-05">中点類（cl-05）</a>は四分），ただし，行の調整処理で⼆分アキや四分アキが詰められている場合は，調整で詰められた空き量までとする，例えば，四分アキとなっていれば，四分まで）
        </p>
      </li>
    </ul>
    <figure id=mono-ex-2>
      <img its-locale-filter-list="en" src="img/fig6.svg" />
      <img its-locale-filter-list="ja" src="img_ja/fig6.svg" />
      <figcaption>
          <span its-locale-filter-list="en" lang="en">Example 2 of mono-ruby protruding</span>
          <span its-locale-filter-list="ja" lang="ja">はみ出しのあるモノルビの例2</span>
      </figcaption>
    </figure>
  </li>
  <li>
    <p its-locale-filter-list="en" lang="en">When the ruby string is longer than the base character string,
 and the ruby falls at the start of the line,
 then the start of the ruby string is aligned with the line’s start edge
 (see <a href="#line-start-mono"></a>),
 while if the ruby falls at the end of the line,
 then the end of the ruby string is aligned with the line’s end edge
 (see <a href="#line-end-mono"></a>).</p>
 <p its-locale-filter-list="ja" lang="ja">親文字よりルビ文字の文字列の全長が長い場合，行頭ではルビ文字の文字列の先頭を行頭にそろえ（[[[#line-start-mono]]]），行末ではルビ文字の文字列の末尾を行末にそろえる（[[[#line-end-mono]]]）．</p>
  <figure id=line-start-mono>
      <img its-locale-filter-list="en" src="img/fig7.svg" />
      <img its-locale-filter-list="ja" src="img_ja/fig7.svg" />
      <figcaption>
        <span its-locale-filter-list="en" lang="en">Example of mono-ruby at the line start</span>
        <span its-locale-filter-list="ja" lang="ja">行頭のモノルビの例</span>
      </figcaption>
    </figure>
    <figure id=line-end-mono>
      <img its-locale-filter-list="en" src="img/fig8.svg" />
      <img its-locale-filter-list="ja" src="img_ja/fig8.svg" />
      <figcaption>
        <span its-locale-filter-list="en" lang="en">Example of mono-ruby at the line end</span>
        <span its-locale-filter-list="ja" lang="ja">行末のモノルビの例</span>
      </figcaption>
    </figure>

  </li>
</ol>
</section>

<section>
<h3 id="placement-of-group-ruby">
    <span its-locale-filter-list="en" lang="en">Placement of group-ruby</span>
    <span its-locale-filter-list="ja" lang="ja">グループルビの配置処理</span>
</h3>

<p its-locale-filter-list="en" lang="en">Group-ruby is placed as follows:</p>
<p its-locale-filter-list="ja" lang="ja">グループルビの配置処理は，次による．</p>

<ol>
  <li>
    <p its-locale-filter-list="en" lang="en">
    When the ruby string and the base character string
    are composed of characters such as
    <a href="https://www.w3.org/TR/jlreq/#cl-15">Hiragana (cl-15)</a>,
    <a href="https://www.w3.org/TR/jlreq/#cl-26">Katakana (cl-16)</a>,
    <a href="https://www.w3.org/TR/jlreq/#cl-19">Ideographic characters (cl-19)</a>,
    and so on,
    excluding characters like
    <a href="https://www.w3.org/TR/jlreq/#cl-24">Grouped numerals (cl-24)</a>,
    <a href="https://www.w3.org/TR/jlreq/#cl-25">Unit symbols (cl-25)</a>,
    <a href="https://www.w3.org/TR/jlreq/#cl-26">Western word space (cl-26)</a>,
    or <a href="https://www.w3.org/TR/jlreq/#cl-27">Western characters (cl-27)</a> [[JLREQ]]
    which have their own individual width,
    the way they are positioned depends
    on how their respective lengths would
    compare if they were each laid out
    without any inter-letter spacing:</p>

    <p its-locale-filter-list="ja" lang="ja">
        ルビ文字及び親文字が<a href="https://www.w3.org/TR/jlreq/#cl-24">連数字中の⽂字（cl-24）</a>，<a href="https://www.w3.org/TR/jlreq/#cl-25">単位記号中の⽂字（cl-25）</a>，<a href="https://www.w3.org/TR/jlreq/#cl-26">欧文用間隔（cl-26）</a>，<a href="https://www.w3.org/TR/jlreq/#cl-27">欧⽂⽤⽂字（cl-27）</a>のように固有の字幅を持った文字以外の<a href="https://www.w3.org/TR/jlreq/#cl-15">平仮名（cl-15）</a>，<a href="https://www.w3.org/TR/jlreq/#cl-26">⽚仮名（cl-16）</a>，<a href="https://www.w3.org/TR/jlreq/#cl-19">漢字等（cl-19）</a>などの場合は，それぞれをベタ組にした場合のルビ文字の文字列の全長と，親文字の文字列の全長を比較し，次のように配置する．
    </p>

    <ul>
      <li>
        <p its-locale-filter-list="en" lang="en">When their respective lengths would be the same,
        both are laid out without inter-letter spacing
        and placed such that their respective centers in the inline direction are aligned
        (see <a href="#group-ruby"></a>).</p>
        <p its-locale-filter-list="ja" lang="ja">
            ルビ文字の文字列の全長と親文字の文字列の全長が同じ場合は，それぞれをベタ組とし，ルビ文字の文字列及び親文字の文字列の字詰め方向の中心をそろえて配置する（[[[#group-ruby]]]）．
        </p>
        <figure id=group-ruby>
          <img its-locale-filter-list="en" src="img/fig9.svg" />
          <img its-locale-filter-list="ja" src="img_ja/fig9.svg" />
          <figcaption>
            <span its-locale-filter-list="en" lang="en">Example 1 of group-ruby</span>
            <span its-locale-filter-list="ja" lang="ja">グループルビの例1</span>
          </figcaption>
        </figure>

      </li>
      <li>
        <p its-locale-filter-list="en" lang="en">When the ruby string is shorter than the base character string,
        space is inserted between every character in the ruby string
        as well as at the start and the end of the ruby string
        so that it becomes the same length as the base character string,
        then their centers in the inline direction are aligned.
        The size of the space inserted between each of the ruby characters
        is twice the size of the space inserted at the end and at the start
        (see <a href="#group-2"></a>).</p>
        <p its-locale-filter-list="ja" lang="ja">
            ルビ文字の文字列の全長が親文字の文字列の全長より短い場合は，ルビ文字の文字列の字間及びその前後を空け，それぞれの文字列の全長を同じにし，各文字列の字詰め方向の中心をそろえて配置する．空ける量は，ルビ文字の文字列の字間の空き量の大きさ 2 に対し，親文字の文字列の先頭からルビ文字の文字列の先頭までの空き量及び親文字の文字列の末尾からルビ文字の文字列の末尾までの空き量を 1 の比率で空ける（[[[#group-2]]]）．
        </p>
        <figure id=group-2>
          <img its-locale-filter-list="en" src="img/fig10.svg" />
          <img its-locale-filter-list="ja" src="img_ja/fig10.svg" />
          <figcaption>
            <span its-locale-filter-list="en" lang="en">Example 2 of group-ruby</span>
            <span its-locale-filter-list="ja" lang="ja">グループルビの例2</span>
          </figcaption>
        </figure>
        <p its-locale-filter-list="en" lang="en">
        However, the size space inserted at the start and end must
        be capped at no more than half the size of one base character,
        and the space inserted between each ruby character is enlarged to compensate
        (see <a href="#group-3"></a>).
        </p>
        <p its-locale-filter-list="ja" lang="ja">
            ただし，ルビ文字の文字列の先頭及びルビ文字の文字列の末尾の最大の空き量は，親文字の文字サイズの 1/2 とし，ルビ文字の文字列の字間の空き量を均等に増やす（[[[#group-3]]]）．
        </p>
        <figure id=group-3>
          <img src="img/fig11.svg" />
          <figcaption>
            <span its-locale-filter-list="en" lang="en">Example 3 of group-ruby</span>
            <span its-locale-filter-list="ja" lang="ja">グループルビの例3</span>
          </figcaption>
        </figure>

      </li>
      <li>
        <p its-locale-filter-list="en" lang="en">When the ruby string is longer than the base character string,
        space is inserted between every character in the base character string
        as well as at the start and the end of the base character string
        so that it becomes the same length as the ruby string,
        then their centers in the inline direction are aligned.
        The size of the space inserted between each of the base characters
        is twice the size of the space inserted at the end and at the start
        (see <a href="#group-4"></a>).</p>
        <p its-locale-filter-list="ja" lang="ja">
            ルビ文字の文字列の全長が親文字の文字列の全長より長い場合は，親文字の文字列の字間及びその前後を空け，それぞれの文字列の全長を同じにし，各文字列の字詰め方向の中心をそろえて配置する．空ける量は，親文字の文字列の字間の空き量の大きさ 2 に対し，ルビ文字の文字列の先頭から親文字の文字列の先頭までの空き量及びルビ文字の文字列の末尾から親文字の文字列の末尾までの空き量を 1 の比率で空ける（[[[#group-4]]]）．
        </p>
          <figure id=group-4>
          <img src="img/fig12.svg" />
          <figcaption>
              <span its-locale-filter-list="en" lang="en">Example 4 of group-ruby</span>
              <span its-locale-filter-list="ja" lang="ja">グループルビの例4</span>
          </figcaption>
        </figure>

      </li>
    </ul>
  </li>
  <li>
    <p its-locale-filter-list="en" lang="en">When the base character string is composed of characters like
    <a href="https://www.w3.org/TR/jlreq/#cl-24">Grouped numerals (cl-24)</a>,
    <a href="https://www.w3.org/TR/jlreq/#cl-25">Unit symbols (cl-25)</a>,
    <a href="https://www.w3.org/TR/jlreq/#cl-26">Western word space (cl-26)</a>,
    or <a href="https://www.w3.org/TR/jlreq/#cl-27">Western characters (cl-27)</a>
    which have their own individual width,
    and the ruby string is composed of characters such as
    <a href="https://www.w3.org/TR/jlreq/#cl-15">Hiragana (cl-15)</a>,
    <a href="https://www.w3.org/TR/jlreq/#cl-26">Katakana (cl-16)</a>,
    <a href="https://www.w3.org/TR/jlreq/#cl-19">Ideographic characters (cl-19)</a> [[JLREQ]],
    and so on,
    the placement depends on the following (see <a href="#ruby-west"></a>):</p>
    <p its-locale-filter-list="ja" lang="ja">
        親文字が<a href="https://www.w3.org/TR/jlreq/#cl-24">連数字中の⽂字（cl-24）</a>，<a href="https://www.w3.org/TR/jlreq/#cl-25">単位記号中の⽂字（cl-25）</a>，<a href="https://www.w3.org/TR/jlreq/#cl-26">欧文用間隔（cl-26）</a>，<a href="https://www.w3.org/TR/jlreq/#cl-27">欧⽂⽤⽂字（cl-27）</a>のように固有の字幅を持った文字で，かつ，ルビ文字が<a href="https://www.w3.org/TR/jlreq/#cl-15">平仮名（cl-15）</a>，<a href="https://www.w3.org/TR/jlreq/#cl-16">⽚仮名（cl-16）</a>，<a href="https://www.w3.org/TR/jlreq/#cl-19">漢字等（cl-19）</a>などの場合は，次による（[[[#ruby-west]]]）．
    </p>
    <ul>
      <li>
        <p its-locale-filter-list="en" lang="en">When their respective lengths would be the same,
        both are laid out without inter-letter spacing
        and placed such that their respective centers in the inline direction are aligned.</p>
        <p its-locale-filter-list="ja" lang="ja">ルビ文字の文字列の全長と親文字の文字列の全長が同じ場合は，それぞれをベタ組とし，ルビ文字の文字列及び親文字の文字列の字詰め方向の中心をそろえて配置する．</p>
      </li>
      <li>
          <p its-locale-filter-list="en" lang="en">When the ruby string is shorter than the base character string,
        space is inserted between every character in the ruby string
        as well as at the start and the end of the ruby string
        so that it becomes the same length as the base character string,
        then their centers in the inline direction are aligned.
        The size of the space inserted between each of the ruby characters
        is twice the size of the space inserted at the end and at the start.</p>
        <p its-locale-filter-list="ja" lang="ja">
            ルビ文字の文字列の全長が親文字の文字列の全長より短い場合は，ルビ文字の文字列の字間及びその前後を空け，それぞれの文字列の全長を同じにし，各文字列の字詰め方向の中心をそろえて配置する．空ける量は，ルビ文字の文字列の字間の空き量の大きさ 2 に対し，親文字の文字列の先頭からルビ文字の文字列の先頭までの空き量及び親文字の文字列の末尾からルビ文字の文字列の末尾までの空き量を 1 の比率で空ける．
        </p>
      </li>
      <li>
        <p its-locale-filter-list="en" lang="en">When the ruby string is longer than the base character string,
        both are laid out without inter-letter spacing
        and placed such that their respective centers in the inline direction are aligned.
        In this case, the ruby string protrudes from the base character string.</p>
        <p its-locale-filter-list="ja" lang="ja">
            ルビ文字の文字列の全長が親文字の文字列の全長より長い場合は，それぞれをベタ組とし，ルビ文字の文字列及び親文字の文字列の字詰め方向の中心をそろえて配置する．この場合，ルビ文字は親文字からはみ出すことになる．
        </p>
      </li>
    </ul>
    <figure id=ruby-west>
      <img src="img/fig13.svg" />
      <figcaption>
          <span its-locale-filter-list="en" lang="en">Example of ruby with western characters</span>
          <span its-locale-filter-list="ja" lang="ja">欧字を含むルビの例</span>
      </figcaption>
    </figure>
  </li>
  <li>
    <p its-locale-filter-list="en" lang="en">When the ruby string is composed of characters like
    <a href="https://www.w3.org/TR/jlreq/#cl-24">Grouped numerals (cl-24)</a>,
    <a href="https://www.w3.org/TR/jlreq/#cl-25">Unit symbols (cl-25)</a>,
    <a href="https://www.w3.org/TR/jlreq/#cl-26">Western word space (cl-26)</a>,
    or <a href="https://www.w3.org/TR/jlreq/#cl-27">Western characters (cl-27)</a>
    which have their own individual width,
    and the base character string is composed of characters such as
    <a href="https://www.w3.org/TR/jlreq/#cl-15">Hiragana (cl-15)</a>,
    <a href="https://www.w3.org/TR/jlreq/#cl-26">Katakana (cl-16)</a>,
    <a href="https://www.w3.org/TR/jlreq/#cl-19">Ideographic characters (cl-19)</a> [[JLREQ]],
    and so on,
    the placement depends on the following (see <a href="#ruby-west"></a>):</p>
    <p its-locale-filter-list="ja" lang="ja">
        ルビ文字が<a href="https://www.w3.org/TR/jlreq/#cl-24">連数字中の⽂字（cl-24）</a>，<a href="https://www.w3.org/TR/jlreq/#cl-25"></a>単位記号中の⽂字（cl-25），<a href="https://www.w3.org/TR/jlreq/#cl-26">欧文用間隔（cl-26）</a>，<a href="https://www.w3.org/TR/jlreq/#cl-27">欧⽂⽤⽂字（cl-27）</a>のように固有の字幅を持った文字で，かつ，親文字が<a href="https://www.w3.org/TR/jlreq/#cl-15">平仮名（cl-15）</a>，<a href="https://www.w3.org/TR/jlreq/#cl-16">⽚仮名（cl-16）</a>，<a href="https://www.w3.org/TR/jlreq/#cl-19">漢字等（cl-19）</a>などの場合は，次による（[[[#ruby-west]]]）．
    </p>

    <ul>
      <li>
        <p its-locale-filter-list="en" lang="en">When their respective lengths would be the same,
        both are laid out without inter-letter spacing
        and placed such that their respective centers in the inline direction are aligned.</p>
        <p its-locale-filter-list="ja" lang="ja">
          ルビ文字の文字列の全長と親文字の文字列の全長が同じ場合は，それぞれをベタ組とし，ルビ文字の文字列及び親文字の文字列の字詰め方向の中心をそろえて配置する．
        </p>
      </li>
      <li>
        <p its-locale-filter-list="en" lang="en">When the ruby string is shorter than the base character string,
        both are laid out without inter-letter spacing
        and placed such that their respective centers in the inline direction are aligned.</p>
        <p its-locale-filter-list="ja" lang="ja">
          ルビ文字の文字列の全長が親文字の文字列の全長より短い場合は，それぞれをベタ組とし，ルビ文字の文字列及び親文字の文字列の字詰め方向の中心をそろえて配置する．
        </p>
      </li>
      <li>
        <p its-locale-filter-list="en" lang="en">When the ruby string is longer than the base character string,
        space is inserted between every character in the base character string
        as well as at the start and the end of the base character string
        so that it becomes the same length as the ruby string,
        then their centers in the inline direction are aligned.
        The size of the space inserted between each of the base characters
        is twice the size of the space inserted at the end and at the start.</p>
        <p its-locale-filter-list="ja" lang="ja">
          ルビ文字の文字列の全長が親文字の文字列の全長より長い場合は，親文字の文字列の字間及びその前後を空け，それぞれの文字列の全長を同じにし，各文字列の字詰め方向の中心をそろえて配置する．空ける量は，親文字の文字列の字間の空き量の大きさ 2 に対し，ルビ文字の文字列の先頭から親文字の文字列の先頭までの空き量及びルビ文字の文字列の末尾から親文字の文字列の末尾までの空き量を 1 の比率で空ける．
        </p>
      </li>
    </ul>
  </li>
  <li>
    <p its-locale-filter-list="en" lang="en">When the ruby string is longer than the base character string and protrudes,
    whether and how it hangs over characters preceding or following
    the base character string
    is handled in the same way as with mono-ruby
    (see <a href="#protruding-group"></a>).
    Also, when the ruby string is longer than the base character string,
    protrudes, and is located at the start or end of the line,
    the processing is also identical to that of mono-ruby.</p>
    <p its-locale-filter-list="ja" lang="ja">
      親文字の文字列よりルビ文字の文字列の全長が長い場合，親文字からはみ出したルビ文字を前⼜は後ろに配置する文字に掛けてよいかどうかはモノルビの処理で説明した方法による（[[[#protruding-group]]]）．また，親文字の文字列よりルビ文字の文字列の全長が長い場合の行頭又は行末での配置処理も，モノルビの処理で説明した方法による．
    </p>
    <figure id=protruding-group>
      <img src="img/fig14.svg" />
      <figcaption>
          <span its-locale-filter-list="en" lang="en">Example of protruding group-ruby</span>
          <span its-locale-filter-list="ja" lang="ja">はみ出しのあるグループルビの例</span>
      </figcaption>
    </figure>
  </li>
  <li>
    <p its-locale-filter-list="en" lang="en">In the case of group ruby,
    the base character string and its associated ruby string
    are treated as a unit,
    so there is no line wrapping opportunity inside either string.</p>
    <p its-locale-filter-list="ja" lang="ja">
      グループルビの場合，親⽂字の文字列とそれに付くルビ⽂字の⽂字列は，⼀体として扱い，2⾏に分割してはならない．
    </p>
    <aside class="note" title="Wrap opportunities in group-ruby" its-locale-filter-list="en" lang="en">
      <p class="checkme">As group-ruby is treated as a unit, there is no wrap opportunity.
      However, in some exceptional cases where it is wrapped,
      it is then processed similarly to jukugo-ruby.</p>
      <figure id=wrap-group>
        <img src="img/fig15.svg" />
        <figcaption>Wrapping group-ruby</figcaption>
      </figure>
    </aside>
    <aside class=note title="グループルビの2行にわたる分割" its-locale-filter-list="ja" lang="ja">
        グループルビは，一体として扱うことから分割禁止としている．しかし，前述したように 2 行に分割する例もあり，このことを考慮すると，熟語ルビと同様に，グループルビでも，親文字とルビの組合せを考慮した分割ができることが望ましいといえよう．
        <figure id=wrap-group-ja>
          <img src="img/fig15.svg" />
          <figcaption>グループルビの分割例</figcaption>
        </figure>
    </aside>
  </li>
</ol>
</section>

<section>
<h3 id="placement-of-jukugo-ruby">
    <span its-locale-filter-list="en" lang="en">Placement of Jukugo-ruby</span>
    <span its-locale-filter-list="ja" lang="ja">熟語ルビの配置処理</span>
</h3>

<p its-locale-filter-list="en" lang="en">Jukugo-ruby is placed as follows:</p>
<p its-locale-filter-list="ja" lang="ja">熟語ルビの配置処理は，次による．</p>

<ol>
  <li>
    <p its-locale-filter-list="en" lang="en">With jukugo-ruby, each base character is associated with its own ruby string.
    When the length of each of these ruby string laid out without inter-letter spacing
    is shorter than the length of all their corresponding base characters,
    placement is determined as follows:</p>
    <p its-locale-filter-list="ja" lang="ja">
      熟語ルビでは，各親文字とルビ文字とが対応している．この各親文字に対応したそれぞれのルビ文字の文字列をベタ組にした場合において，各親文字に対応したそれぞれのルビ文字の文字列のすべてにおいて，その全長が親文字の文字サイズ以下のときは，次による．
    </p>

    <ul>
      <li>
        <p its-locale-filter-list="en" lang="en">When the ruby string associated with an individual base character is 1 character long,
        the ruby character and the base character
        are placed such that their respective centers in the inline direction are aligned
        (see <a href=#jukugo-1></a>).</p>
        <p its-locale-filter-list="ja" lang="ja">
          各親文字に対応したルビ文字が 1 字の場合は，親文字とルビ文字の字詰め方向の中心をそろえて配置する（[[[#jukugo-1]]]）．
        </p>
        <figure id=jukugo-1>
          <img src="img/fig16.svg" />
          <figcaption>
              <span its-locale-filter-list="en" lang="en">Example 1 of jukugo-ruby</span>
              <span its-locale-filter-list="ja" lang="ja">熟語ルビの例1</span>
          </figcaption>
        </figure>
      </li>
      <li>
        <p its-locale-filter-list="en" lang="en">When the ruby string associated with an individual base character is 2 characters long or more,
        the ruby string is laid out without inter-letter spacing,
        and placed such that its center and the center of its base character are aligned in the inline direction
        (see <a href=#jukugo-1></a>).</p>
        <p its-locale-filter-list="ja" lang="ja">
          各親文字に対応したルビ文字が2字以上の場合は，ルビ文字の文字列の字間をベタ組とし，親文字とルビ文字の文字列の字詰め方向の中心をそろえて配置する（[[[#jukugo-1]]]）．
        </p>
      </li>
    </ul>
  </li>
  <li>
    <p its-locale-filter-list="en" lang="en">If even a single ruby string is longer than its corresponding base character
    when laid out without inter-letter spacing,
    the processing is identical to group-ruby
    (see <a href=#jukugo-2></a> and <a href=#jukugo-3></a>).</p>
    <p its-locale-filter-list="ja" lang="ja">
        各親文字に対応したそれぞれのルビ文字の文字列をベタ組にした場合において，各親文字に対応したそれぞれのルビ文字の文字列の全長が1つでも親文字の文字サイズを越えるときは，グループルビと同じ配置処理とする（[[[#jukugo-2]]]，[[[#jukugo-3]]]参照）．
    </p>
    <figure id=jukugo-2>
      <img src="img/fig17.svg" />
      <figcaption>
        <span its-locale-filter-list="en" lang="en">Example 2 of jukugo-ruby</span>
        <span its-locale-filter-list="ja" lang="ja">熟語ルビの例2</span>
      </figcaption>
    </figure>
    <figure id=jukugo-3>
      <img src="img/fig18.svg" />
      <figcaption>
        <span its-locale-filter-list="en" lang="en">Example 3 of jukugo-ruby</span>
        <span its-locale-filter-list="ja" lang="ja">熟語ルビの例3</span>
      </figcaption>
    </figure>

  </li>
  <li>
    <p its-locale-filter-list="en" lang="en">With jukugo-ruby, individual base characters and their associated ruby string are treated as a unit,
    and line wrap opportunities are allowed between two base characters.
    When such a line wrap occurs,
    if a single base character that is part of the jukugo is placed alone at the end or at the start of a line,
    it is processed identically to mono-ruby;
    conversely when several base characters that are part of the jukugo
    are placed together at the end or start of a line,
    they are processed together as has been described in this section about jukugo-ruby
    (see <a href=#wrap-jukugo></a>).</p>
    <p its-locale-filter-list="ja" lang="ja">
      熟語ルビは，各親文字間で，各親文字とルビ文字の組合せを維持したうえで，2 行にわたる文字間での分割ができるものとする．この場合，行末又は行頭で親文字が 1 字なったときは，モノルビと同じ配置処理とし，親文字が 2 字以上となったときは，ここで説明した熟語ルビの配置処理とする（[[[#wrap-jukugo]]]）．
    </p>
    <figure id=wrap-jukugo>
      <img src="img/fig19.svg" />
      <figcaption>
          <span its-locale-filter-list="en" lang="en">Example of wrapping jukugo-ruby</span>
          <span its-locale-filter-list="ja" lang="ja">熟語ルビの分割例</span>
      </figcaption>
    </figure>
  </li>
  <li>
    <p its-locale-filter-list="en" lang="en">When the ruby string is longer than the base character string and protrudes,
    whether and how it hangs over characters preceding or following
    the base character string
    is handled in the same way as with mono-ruby.
    Also, when the ruby string is longer than the base character string,
    protrudes, and is located at the start or end of the line,
    the processing is also identical to that of mono-ruby.</p>
    <p its-locale-filter-list="ja" lang="ja">
      ルビ文字の文字列の全長が親文字の文字列の全長より長い場合，親文字からはみ出したルビ文字を親文字の前⼜は後ろに配置する文字に掛けてよいかどうかは，モノルビの配置処理と同じとする．また，親文字の文字列よりルビ文字の文字列の全長が長い場合の行頭又は行末での配置処理も，モノルビの処理で説明した方法による．
    </p>
  </li>
</ol>
</section>
</section>

<section class=informative>
<h2 id="ruby-and-accessibility">
    <span its-locale-filter-list="en" lang="en">Ruby and Accessibility</span>
    <span its-locale-filter-list="ja" lang="ja">ルビとアクセシビリティ</span>
</h2>

<section>
<h3 id="accessibility-improvements-using-ruby">
    <span its-locale-filter-list="en" lang="en">Accessibility Improvements Using Ruby</span>
    <span its-locale-filter-list="ja" lang="ja">ルビによるアクセシビリティの向上</span>
</h3>

<p its-locale-filter-list="en" lang="en">Ruby plays a role in improving accessibility for people with visual impairments,
and other sources of reading difficulties.
Therefore, this section examines the relationship between ruby and accessibility.</p>
<p its-locale-filter-list="ja" lang="ja">
視覚障害者などのアクセシビリティを向上させるためにルビは一定の役割を果たしている．そこで，アクセシビリティに関係するルビの問題について補足しておく．
</p>

<p its-locale-filter-list="en" lang="en">Reading difficulties can be caused by a variety of factors,
and therefore, requirements to improve accessibility also vary.
For example, here are some common requirements:</p>
<p its-locale-filter-list="ja" lang="ja">
読書が困難となる原因はさまざまであり，これに伴いアクセシビリティを向上させるために要求される要件も異なってくる．例えば，以下のような要求がある．
</p>

<ul>
  <li>
    <p its-locale-filter-list="en" lang="en">To accommodate young children who cannot read any kanji,
    general-ruby must be added to all kanji.</p>
    <p its-locale-filter-list="ja" lang="ja">
      漢字がほとんど読めない子がいるので，すべての漢字にルビを付ける総ルビが必要となる．
    </p>
    <aside class=note title="General-Ruby and Para-Ruby" its-locale-filter-list="en" lang="en">
      See <a href="https://www.w3.org/TR/jlreq/#choice_of_base_characters_to_be_annotated_by_ruby">JLReq section “3.2.2 Choice of Base Characters to be Annotated by Ruby”</a> for an explanation of “general-ruby” and “para-ruby”. [[JLREQ]]
    </aside>
    <aside class=note title="総ルビとパラルビ" its-locale-filter-list="ja" lang="ja">
        総ルビとパラルビについては，<a href="https://www.w3.org/TR/jlreq/#choice_of_base_characters_to_be_annotated_by_ruby">JLReq の“3.3.2　ルビの付け方”</a>で解説されている
    </aside>
  </li>
  <li>
    <p its-locale-filter-list="en" lang="en">As studies progress, a greater number of kanji is known.
    After having read general-ruby many times,
    ruby on difficult kanji only becomes sufficient.
    Therefore para-ruby on only some of the kanji is required.</p>
    <p its-locale-filter-list="ja" lang="ja">
        学習が進むと読める漢字も増える．また，総ルビで何回か読んだあとでは，難しい漢字だけのルビでよいので，一部の漢字だけにルビを付けるパラルビが必要である．
    </p>
    <aside class=note title="The Need for Ruby" its-locale-filter-list="en" lang="en">
      According to the results of the 2017 DAISY survey towards general users of textbooks,
      61% of children require general-ruby.
      Based on the same survey,
      para-ruby is found to be sufficient for 32% of children.
      This means that after having read general-ruby multiple times,
      having ruby on difficult kanji only is found sufficient.
      Moreover, printed textbooks use para-ruby,
      and faithful digital reproduction is needed.
    </aside>
    <aside class=note title="ルビの必要性" its-locale-filter-list="ja" lang="ja">
        <p>2017 年度の DAISY 教科書一般申請利用者へのアンケート結果によれば，61%の児童が総ルビを要求している．</p>
        <p>また，同調査では，32%の児童がパラルビで十分としている．</p>
        <p>総ルビで何回か読んだあとは，難しい漢字だけのルビでいいということである．また，紙の教科書はパラルビなので，それを忠実に再現する必要性もある．</p>
      </aside>
    <aside class=note title="Kanji Studied by Elementary and Middle School Students" its-locale-filter-list="en" lang="en">
      Kanji to be learned during primary school are defined in
      the “Primary School Learning Guidelines”.
      Those kanji are often called “educational kanji”.
      In the list published in 2017,
      1026 kanji are listed and spread across the various school years
      according to the “Kanji Allotment Table by Grade”.
      For middle school,
      the split between each grade is undefined,
      but students are required to study
      the 1110 “characters in common use” no included in educational kanji
      so as to have studied all 2136 characters in common use
      by the end of middle school.
    </aside>
    <aside class=note title="小学校・中学校で学習する漢字" its-locale-filter-list="ja" lang="ja">
        <p>小学校で学習する漢字は，“小学校学習指導要領”で定められている．この漢字は，一般には“教育漢字”と呼ばれている．2017（平成 29 年）に告示された“小学校学習指導要領”において，“別表　学年別漢字配当表”として学年別に 1026 字の漢字が示されている．</p>
        <p>中学校では，学年別に学ぶ漢字は示されていないが，教育漢字以外の常用漢字の 1110 字を学び，小学校・中学校を通じて常用漢字の 2136 字すべてを学ぶことになっている．</p>
    </aside>
  </li>
  <li>
    <p its-locale-filter-list="en" lang="en">Some people have difficulties in visually distinguishing between
    ruby characters and the base characters to which they are attached,
    and misread the combination as a different character altogether.
    There must be a display method that enables clearly distinguishing between the two.
    Also, for those who already know how to read the kanji,
    there must be a way to hide the ruby.</p>
    <p its-locale-filter-list="ja" lang="ja">
      ルビと親文字との区別がつかず，別の文字と認識するケースがあるので，ルビと親文字がはっきり区別できるような表示方法が必要である．あるいは，漢字が読める人にとっては，かえってルビが余分なものとなる可能性もあるので，ルビを付けない方法も必要となる．
    </p>
  </li>
  <li>
    <p its-locale-filter-list="en" lang="en">As inline parenthesised annotations can be used instead,
    there is no strong need for double-sided ruby.</p>
    <p its-locale-filter-list="ja" lang="ja">括弧書きなどで代用できることから，両側のルビはそれほど必要としない．</p>
  </li>
</ul>
</section>

<section>
<h3 id="ruby-display-requirements-for-accessibility">
    <span its-locale-filter-list="en" lang="en">Ruby Display Requirements for Accessibility</span>
    <span its-locale-filter-list="ja" lang="ja">アクセシビリティにとってのルビの表示要件</span>
</h3>

<p its-locale-filter-list="en" lang="en">Based on the above,
we can gather the following
ruby display requirements for accessibility:</p>
<p its-locale-filter-list="ja" lang="ja">
  上記の要求例から，アクセシビリティにとってのルビの表示要件としては，次のようなことが求められる．
</p>

<ol>
  <li>
    <p its-locale-filter-list="en" lang="en">Support for general-ruby is required.</p>
    <p its-locale-filter-list="ja" lang="ja">
      総ルビが必要である．
    </p>
  </li>
  <li>
    <p its-locale-filter-list="en" lang="en">Support for para-ruby is required.
    Moreover, as the number of kanji known increases with the level of studies,
    based on the content and on the level of the reader,
    it must be possible to only display ruby for kanji
    assigned to a particular school year (or later).</p>
    <p its-locale-filter-list="ja" lang="ja">
      パラルビが必要である．なお，パラルビでは，学習の進行に伴い学ぶ漢字が増えていくので，コンテンツの内容や読者層に応じて，指定した学年以降で習う漢字についてルビを表示する必要がある．
    </p>
  </li>
  <li>
    <p its-locale-filter-list="en" lang="en">Support for hiding ruby is required.</p>
    <p its-locale-filter-list="ja" lang="ja">
      ルビなしが必要である．
    </p>
    </li>
  <li>
    <p its-locale-filter-list="en" lang="en">Considering the cost of production, distribution, and of user management,
    it is necessary to support ruby-less display, general-ruby display, and para-ruby display
    with the same content.</p>
    <p its-locale-filter-list="ja" lang="ja">
      製作コスト，配布コスト，利用者の管理コストを考慮すると，同一コンテンツで，総ルビ，パラルビ及びルビなしと表示し分けられる必要がある．
    </p>
  </li>
  <li>
    <p its-locale-filter-list="en" lang="en">A method to clearly visually distinguish the ruby characters and their based characters,
    such as displaying them in different colors,
    is required.</p>
    <p its-locale-filter-list="ja" lang="ja">
      ルビと親文字がはっきり区別できるようにルビの色を変える等の表示方法の工夫が必要である．
    </p>
  </li>
</ol>
</section>
</section>
</body>
</html>
